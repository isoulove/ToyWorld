var e=require("@onflow/util-address"),t=require("@onflow/util-invariant"),n=require("@onflow/rlp"),r=require("@onflow/config"),o=require("@onflow/protobuf"),s=require("@improbable-eng/grpc-web"),i=require("@improbable-eng/grpc-web-node-http-transport"),a=require("@onflow/util-template");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l,f='{\n  "tag":"UNKNOWN",\n  "assigns":{},\n  "status":"OK",\n  "reason":null,\n  "accounts":{},\n  "params":{},\n  "arguments":{},\n  "message": {\n    "cadence":null,\n    "refBlock":null,\n    "computeLimit":null,\n    "proposer":null,\n    "payer":null,\n    "authorizations":[],\n    "params":[],\n    "arguments":[]\n  },\n  "proposer":null,\n  "authorizations":[],\n  "payer":null,\n  "events": {\n    "eventType":null,\n    "start":null,\n    "end":null,\n    "blockIds":[]\n  },\n  "transaction": {\n    "id":null\n  },\n  "block": {\n    "id":null,\n    "height":null,\n    "isSealed":null\n  },\n  "account": {\n    "addr":null\n  },\n  "collection": {\n    "id":null\n  }\n}',d=new Set(Object.keys(JSON.parse(f))),m=function(){return JSON.parse(f)},g="abcdefghijklmnopqrstuvwxyz0123456789".split(""),p=function(){return g[~~(Math.random()*g.length)]},h=function(){return Array.from({length:10},p).join("")},v=function(e){return e.status="OK",e},y=function(e,t){return e.status="BAD",e.reason=t,e},k=function(e){return function(t){return t.tag=e,v(t)}},I=function(e,n){return void 0===n&&(n={}),function(r){var o;t.invariant("function"==typeof e||"object"==typeof e,"prepAccount must be passed an authorization function or an account object"),t.invariant(null!=n.role,"Account must have a role");var s=JSON.parse('{\n  "kind":"ACCOUNT",\n  "tempId":null,\n  "addr":null,\n  "keyId":null,\n  "sequenceNum":null,\n  "signature":null,\n  "signingFunction":null,\n  "resolve":null,\n  "role": {\n    "proposer":false,\n    "authorizer":false,\n    "payer":false,\n    "param":false\n  }\n}'),i=n.role,a=h();return r.accounts[a]=c({},s,{tempId:a},e="function"==typeof e?{resolve:e}:e,{role:c({},s.role,"object"==typeof e.role?e.role:{},(o={},o[i]=!0,o))}),"authorizer"===i?r.authorizations.push(a):r[i]=a,r}},b=function(e){return function(t){var n=h();return t.message.arguments.push(n),t.arguments[n]=JSON.parse('{\n  "kind":"ARGUMENT",\n  "tempId":null,\n  "value":null,\n  "asArgument":null,\n  "xform":null,\n  "resolve": null\n}'),t.arguments[n].tempId=n,t.arguments[n].value=e.value,t.arguments[n].asArgument=e.asArgument,t.arguments[n].xform=e.xform,t.arguments[n].resolve=e.resolve,v(t)}},P=k("SCRIPT"),S=k("TRANSACTION"),B=k("GET_TRANSACTION_STATUS"),x=k("GET_TRANSACTION"),A=k("GET_ACCOUNT"),w=k("GET_EVENTS"),T=k("GET_LATEST_BLOCK"),E=k("GET_BLOCK_BY_ID"),N=k("GET_BLOCK_BY_HEIGHT"),G=k("PING"),L=k("GET_BLOCK"),j=k("GET_BLOCK_HEADER"),O=k("GET_COLLECTION"),_=function(e){return function(t){return t.tag===e}},R=_("UNKNOWN"),C=_("SCRIPT"),U=_("TRANSACTION"),D=_("GET_TRANSACTION_STATUS"),H=_("GET_TRANSACTION"),K=_("GET_ACCOUNT"),q=_("GET_EVENTS"),F=_("GET_LATEST_BLOCK"),z=_("GET_BLOCK_BY_ID"),J=_("GET_BLOCK_BY_HEIGHT"),Y=_("PING"),W=_("GET_BLOCK"),M=_("GET_BLOCK_HEADER"),V=_("GET_COLLECTION"),$=function(e){return"BAD"===e.status},X=function e(t,n){void 0===n&&(n=[]);try{return Promise.resolve(function(r,o){try{var s=Promise.resolve(t).then(function(r){if(t=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if(!d.has(r))throw new Error('"'+r+'" is an invalid root level Interaction property.')}return e}(r),$(t))throw new Error("Interaction Error: "+t.reason);if(!n.length)return t;var o=n[0],s=n.slice(1);return Promise.resolve(o).then(function(n){if(Oe(n))return e(n(t),s);if(je(n)||!n)return e(t,s);if(function(e){if(!Le(e)||je(e)||Ne(e))return!1;for(var t,n=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,void 0):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}(d);!(t=n()).done;)if(!e.hasOwnProperty(t.value))return!1;return!0}(n))return e(n,s);throw new Error("Invalid Interaction Composition")})})}catch(e){return o(e)}return s&&s.then?s.then(void 0,o):s}(0,function(e){throw e}))}catch(e){return Promise.reject(e)}},Q=function e(){var t=[].slice.call(arguments),n=t[0],r=t[1];return Ge(n)&&null==r?function(t){return e(t,n)}:X(n,r)},Z=function(e){return e},ee=function(e,t,n){return null==e.assigns[t]?n:e.assigns[t]},te=function(e,t){return function(n){return n.assigns[e]=t,v(n)}},ne=function(e,t){return void 0===t&&(t=Z),function(n){return n.assigns[e]=t(n.assigns[e],n),v(n)}},re=function(e,t){return Buffer.from(e.padStart(2*t,0),"hex")},oe=(l=Buffer.from("FLOW-V0.0-transaction").toString("hex"),Buffer.from(l.padEnd(64,0),"hex")).toString("hex"),se=function(e){return oe+e},ie=function(e){return re(e,8)},ae=function(e){return Buffer.from(JSON.stringify(e),"utf8")},ce=function(e){return n.encode(e).toString("hex")},ue=function(e){return de(e),[(t=e.cadence,Buffer.from(t,"utf8")),e.arguments.map(ae),(n=e.refBlock,re(n,32)),e.computeLimit,ie(e.proposalKey.address),e.proposalKey.keyId,e.proposalKey.sequenceNum,ie(e.payer),e.authorizers.map(ie)];var t,n},le=function(e){var t=fe(e);return e.payloadSigs.map(function(e){return{signerIndex:t.get(e.address),keyId:e.keyId,sig:e.sig}}).sort(function(e,t){return e.signerIndex>t.signerIndex?1:e.signerIndex<t.signerIndex?-1:e.keyId>t.keyId?1:e.keyId<t.keyId?-1:void 0}).map(function(e){return[e.signerIndex,e.keyId,(t=e.sig,Buffer.from(t,"hex"))];var t})},fe=function(e){var t=new Map,n=0,r=function(e){t.has(e)||(t.set(e,n),n++)};return r(e.proposalKey.address),r(e.payer),e.authorizers.forEach(r),t},de=function(e){ve.forEach(function(t){return be(e,t)}),ye.forEach(function(t){return be(e.proposalKey,t,"proposalKey")})},me=function(e){return"number"==typeof e},ge=function(e){return"string"==typeof e},pe=function(e){return null!==e&&"object"==typeof e},he=function(e){return pe(e)&&e instanceof Array},ve=[{name:"cadence",check:ge},{name:"arguments",check:he},{name:"refBlock",check:ge,defaultVal:"0"},{name:"computeLimit",check:me},{name:"proposalKey",check:pe},{name:"payer",check:ge},{name:"authorizers",check:he}],ye=[{name:"address",check:ge},{name:"keyId",check:me},{name:"sequenceNum",check:me}],ke=[{name:"payloadSigs",check:he}],Ie=[{name:"address",check:ge},{name:"keyId",check:me},{name:"sig",check:ge}],be=function(e,t,n,r){var o=t.name,s=t.check,i=t.defaultVal;if(null==e[o]&&null!=i&&(e[o]=i),null==e[o])throw Se(o,n,r);if(!s(e[o]))throw Be(o,n,r)},Pe=function(e,t,n){return t?null==n?t+"."+e:t+"."+n+"."+e:e},Se=function(e,t,n){return new Error("Missing field "+Pe(e,t,n))},Be=function(e,t,n){return new Error("Invalid field "+Pe(e,t,n))},xe=function(e){try{var t=function(){if(U(e))return function(t,n){try{var r=(s=Ae(e),o=Te(e),i=se(ce(ue(o))),Promise.resolve(Promise.all(s.map(we(e,i)))).then(function(){var t=function(e){var t=new Set([e.payer]);return Array.from(t)}(e),n=function(e){return se(ce(function(e){return function(e){ke.forEach(function(t){return be(e,t)}),e.payloadSigs.forEach(function(e,t){Ie.forEach(function(n){return be(e,n,"payloadSigs",t)})})}(e),[ue(e),le(e)]}(e)))}(c({},Te(e),{payloadSigs:s.map(function(t){return{address:e.accounts[t].addr,keyId:e.accounts[t].keyId,sig:e.accounts[t].signature}})}));return Promise.resolve(Promise.all(t.map(we(e,n)))).then(function(){})}))}catch(e){return n(e)}var o,s,i;return r&&r.then?r.then(void 0,n):r}(0,function(t){throw console.error("Signatures",t,{ix:e}),t})}();return Promise.resolve(t&&t.then?t.then(function(t){return e}):e)}catch(e){return Promise.reject(e)}};function Ae(e){var t=new Set(e.authorizations);return t.add(e.proposer),t.delete(e.payer),Array.from(t)}function we(t,n){return function(r){try{var o=t.accounts[r];return null!=o.signature?Promise.resolve():Promise.resolve(o.signingFunction(function(t,n,r){try{return{f_type:"Signable",f_vsn:"1.0.1",message:n,addr:e.sansPrefix(t.addr),keyId:t.keyId,roles:t.role,cadence:r.message.cadence,args:r.message.arguments.map(function(e){return r.arguments[e].asArgument}),data:{},interaction:r,voucher:Ee(r)}}catch(e){throw console.error("buildSignable",e),e}}(o,n,t))).then(function(e){t.accounts[r].signature=e.signature})}catch(e){return Promise.reject(e)}}}function Te(t){return{cadence:t.message.cadence,refBlock:t.message.refBlock||null,computeLimit:t.message.computeLimit,arguments:t.message.arguments.map(function(e){return t.arguments[e].asArgument}),proposalKey:{address:e.sansPrefix(t.accounts[t.proposer].addr),keyId:t.accounts[t.proposer].keyId,sequenceNum:t.accounts[t.proposer].sequenceNum},payer:e.sansPrefix(t.accounts[t.payer].addr),authorizers:t.authorizations.map(function(n){return e.sansPrefix(t.accounts[n].addr)}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[])}}var Ee=function(t){return{cadence:t.message.cadence,refBlock:t.message.refBlock||null,computeLimit:t.message.computeLimit,arguments:t.message.arguments.map(function(e){return t.arguments[e].asArgument}),proposalKey:{address:e.withPrefix(t.accounts[t.proposer].addr),keyId:t.accounts[t.proposer].keyId,sequenceNum:t.accounts[t.proposer].sequenceNum},payer:e.withPrefix(t.accounts[t.payer].addr),authorizers:t.authorizations.map(function(n){return e.withPrefix(t.accounts[n].addr)}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[]),payloadSigs:Ae(t).map(function(n){return{address:e.withPrefix(t.accounts[n].addr),keyId:t.accounts[n].keyId,sig:t.accounts[n].signature}})}},Ne=function(e){return"number"==typeof e},Ge=function(e){return Array.isArray(e)},Le=function(e){return null!==e&&"object"==typeof e},je=function(e){return null==e},Oe=function(e){return"function"==typeof e};function _e(e){return void 0===e&&(e=[]),Q(m(),e)}var Re=function(){return JSON.parse('{\n    "tag":null,\n    "transaction":null,\n    "transactionStatus":null,\n    "transactionId":null,\n    "encodedData":null,\n    "events":null,\n    "account":null,\n    "block":null,\n    "blockHeader":null,\n    "latestBlock":null,\n    "collection":null\n}')},Ce=function(e,t,n){try{return Promise.resolve(new Promise(function(r,o){s.grpc.unary(t,{request:n,host:e,onEnd:function(e){var t=e.statusMessage;e.status===s.grpc.Code.OK?r(e.message):o(new Error(t))}})}))}catch(e){return Promise.reject(e)}};s.grpc.setDefaultTransport(i.NodeHttpTransport());var Ue=function(e){return Buffer.from(e,"hex")},De=function(e){return Buffer.from(e.padStart(16,0),"hex")},He=function(e){return Buffer.from(e).toString("hex")},Ke=function(e){return Buffer.from(JSON.stringify(e),"utf8")},qe=function(e){return Buffer.from(e).toString("hex")},Fe=function(e){return Buffer.from(e).toString("hex")},ze=function(e){return Buffer.from(e).toString("hex")},Je=function(e){return Buffer.from(e).toString("hex")},Ye=function(e){return Buffer.from(e).toString("hex")},We=function(e){return Buffer.from(e).toString("hex")},Me=function(e){return Buffer.from(e).toString("hex")},Ve=function(e){return Buffer.from(e).toString("hex")},$e=function(t,n){void 0===n&&(n={});try{var s=function(r){return n.node=r,Promise.resolve(t).then(function(r){switch(t=r,!0){case U(t):return n.sendTransaction?n.sendTransaction(t,n):function(t,n){void 0===n&&(n={});try{var r=n.unary||Ce;return Promise.resolve(t).then(function(s){t=s;var i=new o.Transaction;i.setScript(Buffer.from(t.message.cadence,"utf8")),i.setGasLimit(t.message.computeLimit),i.setReferenceBlockId(t.message.refBlock?Ue(t.message.refBlock):null),i.setPayer(De(e.sansPrefix(t.accounts[t.payer].addr))),t.message.arguments.forEach(function(e){return i.addArguments(function(e){return Buffer.from(JSON.stringify(e),"utf8")}(t.arguments[e].asArgument))}),t.authorizations.map(function(e){return t.accounts[e].addr}).reduce(function(e,t){return e.find(function(e){return e===t})?e:[].concat(e,[t])},[]).forEach(function(t){return i.addAuthorizers(De(e.sansPrefix(t)))});var a=new o.Transaction.ProposalKey;a.setAddress(De(e.sansPrefix(t.accounts[t.proposer].addr))),a.setKeyId(t.accounts[t.proposer].keyId),a.setSequenceNumber(t.accounts[t.proposer].sequenceNum),i.setProposalKey(a);for(var c=0,u=Object.values(t.accounts);c<u.length;c++){var l=u[c];try{if(!l.role.payer&&null!=l.signature){var f=new o.Transaction.Signature;f.setAddress(De(e.sansPrefix(l.addr))),f.setKeyId(l.keyId),f.setSignature(Ue(l.signature)),i.addPayloadSignatures(f)}}catch(e){throw console.error("Trouble applying payload signature",{acct:l,ix:t}),e}}for(var d=0,m=Object.values(t.accounts);d<m.length;d++){var g=m[d];try{if(g.role.payer&&null!=g.signature){var p=new o.Transaction.Signature;p.setAddress(De(e.sansPrefix(g.addr))),p.setKeyId(g.keyId),p.setSignature(Ue(g.signature)),i.addEnvelopeSignatures(p)}}catch(e){throw console.error("Trouble applying envelope signature",{acct:g,ix:t}),e}}var h=new o.SendTransactionRequest;h.setTransaction(i);var v=Date.now();return Promise.resolve(r(n.node,o.AccessAPI.SendTransaction,h)).then(function(e){var n,r=Date.now(),o=Re();return o.tag=t.tag,o.transactionId=(n=e.getId_asU8(),Buffer.from(n).toString("hex")),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("FLOW::TX",{detail:{txId:o.transactionId,delta:r-v}})),o})})}catch(e){return Promise.reject(e)}}(t,n);case D(t):return n.sendGetTransactionStatus?n.sendGetTransactionStatus(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){e=r;var s=new o.GetTransactionRequest;return s.setId(Buffer.from(e.transaction.id,"hex")),Promise.resolve(n(t.node,o.AccessAPI.GetTransactionResult,s)).then(function(t){var n=t.getEventsList(),r=Re();return r.tag=e.tag,r.transactionStatus={status:t.getStatus(),statusCode:t.getStatusCode(),errorMessage:t.getErrorMessage(),events:n.map(function(e){return{type:e.getType(),transactionId:(t=e.getTransactionId_asU8(),Buffer.from(t).toString("hex")),transactionIndex:e.getTransactionIndex(),eventIndex:e.getEventIndex(),payload:JSON.parse(Buffer.from(e.getPayload_asU8()).toString("utf8"))};var t})},r})})}catch(e){return Promise.reject(e)}}(t,n);case H(t):return n.sendGetTransaction?n.sendGetTransaction(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){e=r;var s=new o.GetTransactionRequest;return s.setId(Buffer.from(e.transaction.id,"hex")),Promise.resolve(n(t.node,o.AccessAPI.GetTransaction,s)).then(function(t){var n=Re();n.tag=e.tag;var r,o=function(e){return{address:He(e.getAddress_asU8()),keyId:e.getKeyId(),signature:He(e.getSignature_asU8())}},s=t.getTransaction();return n.transaction={script:Buffer.from(s.getScript_asU8()).toString("utf8"),args:s.getArgumentsList().map(function(e){return JSON.parse(Buffer.from(e).toString("utf8"))}),referenceBlockId:He(s.getReferenceBlockId_asU8()),gasLimit:s.getGasLimit(),proposalKey:(r=s.getProposalKey(),{address:He(r.getAddress_asU8()),keyId:r.getKeyId(),sequenceNumber:r.getSequenceNumber()}),payer:He(s.getPayer_asU8()),authorizers:s.getAuthorizersList().map(He),payloadSignatures:s.getPayloadSignaturesList().map(o),envelopeSignatures:s.getEnvelopeSignaturesList().map(o)},n})})}catch(e){return Promise.reject(e)}}(t,n);case C(t):return n.sendExecuteScript?n.sendExecuteScript(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){function s(){var t=Re();return t.tag=e.tag,t.encodedData=JSON.parse(Buffer.from(a.getValue_asU8()).toString("utf8")),t}var i,a;e=r;var c=function(){if(e.block.id){(i=new o.ExecuteScriptAtBlockIDRequest).setBlockId(Buffer.from(e.block.id,"hex"));var r=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(t){return i.addArguments(Ke(e.arguments[t].asArgument))}),i.setScript(r),Promise.resolve(n(t.node,o.AccessAPI.ExecuteScriptAtBlockID,i)).then(function(e){a=e})}var s=function(){if(e.block.height){(i=new o.ExecuteScriptAtBlockHeightRequest).setBlockHeight(Number(e.block.height));var r=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(t){return i.addArguments(Ke(e.arguments[t].asArgument))}),i.setScript(r),Promise.resolve(n(t.node,o.AccessAPI.ExecuteScriptAtBlockHeight,i)).then(function(e){a=e})}i=new o.ExecuteScriptAtLatestBlockRequest;var s=Buffer.from(e.message.cadence,"utf8");return e.message.arguments.forEach(function(t){return i.addArguments(Ke(e.arguments[t].asArgument))}),i.setScript(s),Promise.resolve(n(t.node,o.AccessAPI.ExecuteScriptAtLatestBlock,i)).then(function(e){a=e})}();if(s&&s.then)return s.then(function(){})}();return c&&c.then?c.then(s):s()})}catch(e){return Promise.reject(e)}}(t,n);case K(t):return n.sendGetAccount?n.sendGetAccount(t,n):function(t,n){void 0===n&&(n={});try{var r=n.unary||Ce;return Promise.resolve(t).then(function(s){var i,a=(t=s).block.height?new o.GetAccountAtBlockHeightRequest:new o.GetAccountAtLatestBlockRequest;return t.block.height&&a.setBlockHeight(Number(t.block.height)),a.setAddress((i=e.sansPrefix(t.account.addr),Buffer.from(i.padStart(16,0),"hex"))),Promise.resolve(r(n.node,t.block.height?o.AccessAPI.GetAccountAtBlockHeight:o.AccessAPI.GetAccountAtLatestBlock,a)).then(function(n){var r=Re();r.tag=t.tag;var o,s=n.getAccount(),i=(o=s.getContractsMap())?o.getEntryList().reduce(function(e,t){var n;return c({},e,((n={})[t[0]]=Buffer.from(t[1]||new UInt8Array).toString("utf8"),n))},{}):{};return r.account={address:e.withPrefix(qe(s.getAddress_asU8())),balance:s.getBalance(),code:Buffer.from(s.getCode_asU8()||new UInt8Array).toString("utf8"),contracts:i,keys:s.getKeysList().map(function(e){return{index:e.getIndex(),publicKey:qe(e.getPublicKey_asU8()),signAlgo:e.getSignAlgo(),hashAlgo:e.getHashAlgo(),weight:e.getWeight(),sequenceNumber:e.getSequenceNumber(),revoked:e.getRevoked()}})},r})})}catch(e){return Promise.reject(e)}}(t,n);case q(t):return n.sendGetEvents?n.sendGetEvents(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){function s(){var t=Re();t.tag=e.tag;var n=i.getResultsList();return t.events=n.reduce(function(e,t){var n=Fe(t.getBlockId_asU8()),r=t.getBlockHeight(),o=t.getBlockTimestamp().toDate().toISOString();return t.getEventsList().forEach(function(t){e.push({blockId:n,blockHeight:r,blockTimestamp:o,type:t.getType(),transactionId:Fe(t.getTransactionId_asU8()),transactionIndex:t.getTransactionIndex(),eventIndex:t.getEventIndex(),payload:JSON.parse(Buffer.from(t.getPayload_asU8()).toString("utf8"))})}),e},[]),t}var i,a=(e=r).events.start?new o.GetEventsForHeightRangeRequest:new o.GetEventsForBlockIDsRequest;a.setType(e.events.eventType);var c=e.events.start?(a.setStartHeight(Number(e.events.start)),a.setEndHeight(Number(e.events.end)),Promise.resolve(n(t.node,o.AccessAPI.GetEventsForHeightRange,a)).then(function(e){i=e})):(e.events.blockIds.forEach(function(e){return a.addBlockIds(Buffer.from(e,"hex"))}),Promise.resolve(n(t.node,o.AccessAPI.GetEventsForBlockIDs,a)).then(function(e){i=e}));return c&&c.then?c.then(s):s()})}catch(e){return Promise.reject(e)}}(t,n);case F(t):return n.sendGetLatestBlock?n.sendGetLatestBlock(t,n):function(e,t){void 0===t&&(t={});try{return Promise.resolve(e).then(function(n){e=n;var r=new o.GetLatestBlockRequest;return e.latestBlock&&e.latestBlock.isSealed&&(r.setIsSealed(e.latestBlock.isSealed),console.error("\n          %c@onflow/send Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the interaction object is deprecated and will no longer be recognized in future releases of @onflow/send.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/send/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;")),e.block&&e.block.isSealed&&r.setIsSealed(e.block.isSealed),Promise.resolve(Ce(t.node,o.AccessAPI.GetLatestBlock,r)).then(function(t){var n=t.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),s=n.getSignaturesList(),i=Re();return i.tag=e.tag,i.block={id:Ye(n.getId_asU8()),parentId:Ye(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:Ye(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:Ye(e.getBlockId_asU8()),executionReceiptId:Ye(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:s},i})})}catch(e){return Promise.reject(e)}}(t,n);case W(t):return n.sendGetBlock?n.sendGetBlock(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){function s(){var t=a.getBlock(),n=t.getCollectionGuaranteesList(),r=t.getBlockSealsList(),o=t.getSignaturesList().map(ze),s=Re();return s.tag=e.tag,s.block={id:ze(t.getId_asU8()),parentId:ze(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp().toDate().toISOString(),collectionGuarantees:n.map(function(e){return{collectionId:ze(e.getCollectionId_asU8()),signatures:e.getSignaturesList().map(ze)}}),blockSeals:r.map(function(e){return{blockId:ze(e.getBlockId_asU8()),executionReceiptId:ze(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList().map(ze),resultApprovalSignatures:e.getResultApprovalSignaturesList().map(ze)}}),signatures:o},s}var i,a;e=r;var c=function(){if(e.block.id)return(i=new o.GetBlockByIDRequest).setId(Buffer.from(e.block.id,"hex")),Promise.resolve(n(t.node,o.AccessAPI.GetBlockByID,i)).then(function(e){a=e});var r=e.block.height?((i=new o.GetBlockByHeightRequest).setHeight(Number(e.block.height)),Promise.resolve(n(t.node,o.AccessAPI.GetBlockByHeight,i)).then(function(e){a=e})):(i=new o.GetLatestBlockRequest,e.block&&e.block.isSealed&&i.setIsSealed(e.block.isSealed),Promise.resolve(n(t.node,o.AccessAPI.GetLatestBlock,i)).then(function(e){a=e}));return r&&r.then?r.then(function(){}):void 0}();return c&&c.then?c.then(s):s()})}catch(e){return Promise.reject(e)}}(t,n);case M(t):return n.sendGetBlockHeader?n.sendGetBlockHeader(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){function s(){var t=a.getBlock(),n=Re();return n.tag=e.tag,n.blockHeader={id:Je(t.getId_asU8()),parentId:Je(t.getParentId_asU8()),height:t.getHeight(),timestamp:t.getTimestamp().toDate().toISOString()},n}var i,a;e=r;var c=function(){if(e.block.id)return(i=new o.GetBlockHeaderByIDRequest).setId(Buffer.from(e.block.id,"hex")),Promise.resolve(n(t.node,o.AccessAPI.GetBlockHeaderByID,i)).then(function(e){a=e});var r=e.block.height?((i=new o.GetBlockHeaderByHeightRequest).setHeight(Number(e.block.height)),Promise.resolve(n(t.node,o.AccessAPI.GetBlockHeaderByHeight,i)).then(function(e){a=e})):(i=new o.GetLatestBlockHeaderRequest,e.block&&e.block.isSealed&&i.setIsSealed(e.block.isSealed),Promise.resolve(n(t.node,o.AccessAPI.GetLatestBlockHeader,i)).then(function(e){a=e}));return r&&r.then?r.then(function(){}):void 0}();return c&&c.then?c.then(s):s()})}catch(e){return Promise.reject(e)}}(t,n);case z(t):return n.sendGetBlockById?n.sendGetBlockById(t,n):function(e,t){void 0===t&&(t={});try{return Promise.resolve(e).then(function(n){e=n;var r=new o.GetBlockByIDRequest;return r.setId(Buffer.from(e.block.id,"hex")),Promise.resolve(Ce(t.node,o.AccessAPI.GetBlockByID,r)).then(function(t){var n=t.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),s=n.getSignaturesList(),i=Re();return i.tag=e.tag,i.block={id:We(n.getId_asU8()),parentId:We(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:We(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:We(e.getBlockId_asU8()),executionReceiptId:We(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:s},i})})}catch(e){return Promise.reject(e)}}(t,n);case J(t):return n.sendGetBlockByHeight?n.sendGetBlockByHeight(t,n):function(e,t){void 0===t&&(t={});try{return Promise.resolve(e).then(function(n){e=n;var r=new o.GetBlockByHeightRequest;return r.setHeight(Number(e.block.height)),Promise.resolve(Ce(t.node,o.AccessAPI.GetBlockByHeight,r)).then(function(t){var n=t.getBlock(),r=n.getCollectionGuaranteesList(),o=n.getBlockSealsList(),s=n.getSignaturesList(),i=Re();return i.tag=e.tag,i.block={id:Me(n.getId_asU8()),parentId:Me(n.getParentId_asU8()),height:n.getHeight(),timestamp:n.getTimestamp(),collectionGuarantees:r.map(function(e){return{collectionId:Me(e.getCollectionId_asU8()),signatures:e.getSignaturesList()}}),blockSeals:o.map(function(e){return{blockId:Me(e.getBlockId_asU8()),executionReceiptId:Me(e.getExecutionReceiptId_asU8()),executionReceiptSignatures:e.getExecutionReceiptSignaturesList(),resultApprovalSignatures:e.getResultApprovalSignaturesList()}}),signatures:s},i})})}catch(e){return Promise.reject(e)}}(t,n);case V(t):return n.sendGetCollection?n.sendGetCollection(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){e=r;var s=new o.GetCollectionByIDRequest;return s.setId(Buffer.from(e.collection.id,"hex")),Promise.resolve(n(t.node,o.AccessAPI.GetCollectionByID,s)).then(function(t){var n=t.getCollection(),r=Re();return r.tag=e.tag,r.collection={id:Ve(n.getId_asU8()),transactionIds:n.getTransactionIdsList().map(Ve)},r})})}catch(e){return Promise.reject(e)}}(t,n);case Y(t):return n.sendPing?n.sendPing(t,n):function(e,t){void 0===t&&(t={});try{var n=t.unary||Ce;return Promise.resolve(e).then(function(r){e=r;var s=new o.PingRequest;return Promise.resolve(n(t.node,o.AccessAPI.Ping,s)).then(function(t){var n=Re();return n.tag=e.tag,n})})}catch(e){return Promise.reject(e)}}(t,n);default:return t}})},i=n.node;return Promise.resolve(i?s(i):Promise.resolve(r.config().get("accessNode.api")).then(s))}catch(e){return Promise.reject(e)}};function Xe(e){return void 0===e&&(e=null),Q([L,function(t){return t.block.isSealed=e,v(t)}])}function Qe(t){return Q([A,function(n){return n.account.addr=e.sansPrefix(t),v(n)}])}var Ze=function(e,t,n){try{try{return Promise.resolve(Number(e))}catch(e){throw new Error("Decode Number Error : "+n.join("."))}}catch(e){return Promise.reject(e)}},et=function(e){return Promise.resolve(e)},tt=function(e,t,n){try{return Promise.resolve(e.fields.reduce(function(e,r){try{return Promise.resolve(e).then(function(o){return e=o,Promise.resolve(ot(r.value,t,[].concat(n,[r.name]))).then(function(t){return e[r.name]=t,e})})}catch(e){return Promise.reject(e)}},Promise.resolve({}))).then(function(n){var r=e.id&&rt(t,e.id);return r?Promise.resolve(r(n)):n})}catch(e){return Promise.reject(e)}},nt={UInt:Ze,Int:Ze,UInt8:Ze,Int8:Ze,UInt16:Ze,Int16:Ze,UInt32:Ze,Int32:Ze,UInt64:Ze,Int64:Ze,UInt128:Ze,Int128:Ze,UInt256:Ze,Int256:Ze,Word8:Ze,Word16:Ze,Word32:Ze,Word64:Ze,UFix64:et,Fix64:et,String:et,Character:et,Bool:et,Address:et,Void:function(){return Promise.resolve(null)},Optional:function(e,t,n){return Promise.resolve(e?ot(e,t,n):null)},Reference:function(e){try{return Promise.resolve({address:e.address,type:e.type})}catch(e){return Promise.reject(e)}},Array:function(e,t,n){try{return Promise.resolve(Promise.all(e.map(function(e){return new Promise(function(r){try{return Promise.resolve(ot(e,t,[].concat(n,[e.type]))).then(r)}catch(e){return Promise.reject(e)}})})))}catch(e){return Promise.reject(e)}},Dictionary:function(e,t,n){try{return Promise.resolve(e.reduce(function(e,r){try{return Promise.resolve(e).then(function(o){return e=o,Promise.resolve(ot(r.key,t,[].concat(n,[r.key]))).then(function(o){return Promise.resolve(ot(r.value,t,[].concat(n,[r.key]))).then(function(t){return e[o]=t,e})})})}catch(e){return Promise.reject(e)}},Promise.resolve({})))}catch(e){return Promise.reject(e)}},Event:tt,Resource:tt,Struct:tt},rt=function(e,t){var n=Object.keys(e).find(function(e){return/^\/.*\/$/.test(e)?new RegExp(e.substring(1,e.length-1)).test(t):e===t});return t&&n&&e[n]},ot=function(e,t,n){try{var r=rt(t,e.type);if(!r)throw new Error("Undefined Decoder Error: "+e.type+"@"+n.join("."));return Promise.resolve(r(e.value,t,n))}catch(e){return Promise.reject(e)}},st=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=[]);var r=c({},nt,t);return Promise.resolve(ot(e,r,n))},it=function(e,t){void 0===t&&(t={});try{var n,r=c({},nt,t),o=e.encodedData?(n=1,Promise.resolve(st(e.encodedData,r))):e.transactionStatus?(n=1,Promise.resolve(Promise.all(e.transactionStatus.events.map(function(e){try{var t=e.eventIndex,n=e.transactionIndex,o=e.transactionId,s=e.type;return Promise.resolve(st(e.payload,r)).then(function(e){return{type:s,transactionId:o,transactionIndex:n,eventIndex:t,data:e}})}catch(e){return Promise.reject(e)}}))).then(function(t){return c({},e.transactionStatus,{events:t})})):e.transaction?(n=1,e.transaction):e.events?(n=1,Promise.resolve(Promise.all(e.events.map(function(e){try{var t=e.eventIndex,n=e.transactionIndex,o=e.transactionId,s=e.type,i=e.blockTimestamp,a=e.blockHeight,c=e.blockId;return Promise.resolve(st(e.payload,r)).then(function(e){return{blockId:c,blockHeight:a,blockTimestamp:i,type:s,transactionId:o,transactionIndex:n,eventIndex:t,data:e}})}catch(e){return Promise.reject(e)}})))):e.account?(n=1,e.account):e.block?(n=1,e.block):e.blockHeader?(n=1,e.blockHeader):e.latestBlock?(console.error("\n          %c@onflow/decode Deprecation Notice\n          ========================\n\n          Operating upon data of the latestBlock field of the response object is deprecated and will no longer be recognized in future releases of @onflow/decode.\n          Find out more here: https://github.com/onflow/flow-js-sdk/blob/master/packages/decode/WARNINGS.md#0001-Deprecating-latestBlock-field\n\n          =======================\n        ".replace(/\n\s+/g,"\n").trim(),"font-weight:bold;font-family:monospace;"),n=1,e.latestBlock):e.transactionId?(n=1,e.transactionId):e.collection?(n=1,e.collection):void 0;return Promise.resolve(o&&o.then?o.then(function(e){return n?e:null}):n?o:null)}catch(e){return Promise.reject(e)}},at=function(e){try{var n=function(){if(U(e)||C(e)){var n=function(){return t.invariant(ut(o),"Cadence needs to be a string at this point."),Promise.resolve(r.config().where(/^0x/).then(function(e){return Object.entries(e).reduce(function(e,t){return e.replace(t[0],t[1])},o)})).then(function(t){e.message.cadence=t})},o=ee(e,"ix.cadence");t.invariant(ct(o)||ut(o),"Cadence needs to be a function or a string.");var s=function(){if(ct(o))return Promise.resolve(o({})).then(function(e){o=e})}();return s&&s.then?s.then(n):n()}}();return Promise.resolve(n&&n.then?n.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},ct=function(e){return"function"==typeof e},ut=function(e){return"string"==typeof e},lt=function(e){try{if(U(e)||C(e))for(var n=0,r=Object.entries(e.arguments);n<r.length;n++){var o=r[n];e.arguments[o[0]].asArgument=(t.invariant(null!=typeof(s=o[1]).xform,"No type specified for argument: "+s.value),ft(s.xform)?s.xform(s.value):ft(s.xform.asArgument)?s.xform.asArgument(s.value):void t.invariant(!1,"Invalid Argument",s))}return Promise.resolve(e)}catch(e){return Promise.reject(e)}var s},ft=function(e){return"function"==typeof e},dt="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function mt(e,t,n){if(!e.s){if(n instanceof gt){if(!n.s)return void(n.o=mt.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(mt.bind(null,e,t),mt.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var gt=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,o=this.s;if(o){var s=1&o?t:n;if(s){try{mt(r,1,s(this.v))}catch(e){mt(r,2,e)}return r}return this}return this.o=function(e){try{var o=e.v;1&e.s?mt(r,1,t?t(o):o):n?mt(r,1,n(o)):mt(r,2,o)}catch(e){mt(r,2,e)}},r},e}();function pt(e){return e instanceof gt&&1&e.s}var ht=function(e){try{var t=function(){if(U(e))return function(t,n){try{var r=Promise.resolve(vt(e,Object.values(e.accounts))).then(function(){return Promise.resolve(vt(e,Object.values(e.accounts))).then(function(){})})}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,function(e){throw console.error("=== SAD PANDA ===\n\n",e,"\n\n=== SAD PANDA ==="),e})}();return Promise.resolve(t&&t.then?t.then(function(t){return e}):e)}catch(e){return Promise.reject(e)}},vt=function e(n,r,o,s){void 0===s&&(s=3);try{var i=function(){o&&(n.authorizations=n.authorizations.map(function(e){return e===o.tempId?a:e}).reduce(function(e,t){return Array.isArray(t)?[].concat(e,t):[].concat(e,[t])},[]))};t.invariant(s,"Account Resolve Recursion Limit Exceeded",{ix:n,accounts:r});var a=[],c=function(e,t,n){if("function"==typeof e[dt]){var r,o,s,i=e[dt]();if(function e(n){try{for(;!(r=i.next()).done;)if((n=t(r.value))&&n.then){if(!pt(n))return void n.then(e,s||(s=mt.bind(null,o=new gt,2)));n=n.v}o?mt(o,1,n):o=n}catch(e){mt(o||(o=new gt),2,e)}}(),i.return){var a=function(e){try{r.done||i.return()}catch(e){}return e};if(o&&o.then)return o.then(a,function(e){throw a(e)});a()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],u=0;u<e.length;u++)c.push(e[u]);return function(e,t,n){var r,o,s=-1;return function n(i){try{for(;++s<e.length;)if((i=t(s))&&i.then){if(!pt(i))return void i.then(n,o||(o=mt.bind(null,r=new gt,2)));i=i.v}r?mt(r,1,i):r=i}catch(e){mt(r||(r=new gt),2,e)}}(),r}(c,function(e){return t(c[e])})}(r,function(t){function r(){function r(){i.tempId!=t.tempId&&delete n.accounts[i.tempId]}var c=function(){if(Array.isArray(t))return Promise.resolve(e(n,t,i,s-1)).then(function(){});n.accounts[t.tempId]=n.accounts[t.tempId]||t,n.accounts[t.tempId].role.proposer=n.accounts[t.tempId].role.proposer||t.role.proposer,n.accounts[t.tempId].role.payer=n.accounts[t.tempId].role.payer||t.role.payer,n.accounts[t.tempId].role.authorizer=n.accounts[t.tempId].role.authorizer||t.role.authorizer,n.accounts[t.tempId].role.proposer&&n.proposer===i.tempId&&(n.proposer=t.tempId),n.accounts[t.tempId].role.payer&&n.payer===i.tempId&&(n.payer=t.tempId),n.accounts[t.tempId].role.authorizer&&(o?a=[].concat(a,[t.tempId]):n.authorizations=n.authorizations.map(function(e){return e===i.tempId?t.tempId:e}))}();return c&&c.then?c.then(r):r()}var i=o||t,c=function(){if(yt(t.resolve))return Promise.resolve(t.resolve(t,function(e,t){try{return{f_type:"PreSignable",f_vsn:"1.0.1",roles:e.role,cadence:t.message.cadence,args:t.message.arguments.map(function(e){return t.arguments[e].asArgument}),data:{},interaction:t,voucher:Ee(t)}}catch(e){throw console.error("buildPreSignable",e),e}}(t,n))).then(function(e){t=e})}();return c&&c.then?c.then(r):r()});return Promise.resolve(c&&c.then?c.then(i):i())}catch(e){return Promise.reject(e)}},yt=function(e){return"function"==typeof e},kt=function(e){try{var t=ee(e,"ix.validators",[]);return Promise.resolve(Q(e,t.map(function(e){return function(t){return e(t,{Ok:v,Bad:y})}})))}catch(e){return Promise.reject(e)}},It=Q([at,lt,ht,function(e){try{var t=function(){if(U(e)&&null==e.message.refBlock)return Promise.resolve($e(_e([Xe()])).then(it)).then(function(t){e.message.refBlock=t.id})}();return Promise.resolve(t&&t.then?t.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},function(e){try{var n=function(){if(U(e)){var n=Object.values(e.accounts).find(function(e){return e.role.proposer});t.invariant(n,"Transactions require a proposer");var r=function(){if(null==n.sequenceNum)return Promise.resolve(_e([Qe(n.addr)])).then(function(t){return Promise.resolve($e(t).then(it).then(function(e){return e.keys}).then(function(e){return e.find(function(e){return e.index===n.keyId})}).then(function(e){return e.sequenceNumber})).then(function(t){e.accounts[n.tempId].sequenceNum=t})})}();if(r&&r.then)return r.then(function(){})}}();return Promise.resolve(n&&n.then?n.then(function(){return e}):e)}catch(e){return Promise.reject(e)}},xe,function(t){try{for(var n=0,r=Object.keys(t.accounts);n<r.length;n++){var o=r[n];t.accounts[o].addr=e.sansPrefix(t.accounts[o].addr)}return Promise.resolve(t)}catch(e){return Promise.reject(e)}},kt]),bt=function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});try{return Promise.resolve(r.config().get("sdk.send",t.send||$e)).then(function(n){return Promise.resolve(r.config().get("sdk.resolve",t.resolve||It)).then(function(r){return Array.isArray(e)&&(e=Q(m(),e)),Promise.resolve(r(e)).then(function(e){return n(e,t)})})})}catch(e){return Promise.reject(e)}};function Pt(e){return ne("ix.validators",function(t){return Array.isArray(t)?t.push(e):[e]})}var St=[];Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return r.config}}),Object.defineProperty(exports,"cadence",{enumerable:!0,get:function(){return a.template}}),Object.defineProperty(exports,"cdc",{enumerable:!0,get:function(){return a.template}}),exports.account=function(e,t){return bt([Qe(e)],t).then(it)},exports.arg=function(e,t){return{value:e,xform:t}},exports.args=function(e){return void 0===e&&(e=[]),Q(e.map(b))},exports.atBlockHeight=function(e){return Q([function(t){return t.block.height=e,t},Pt(function(e){if("boolean"==typeof e.block.isSealed)throw new Error("Unable to specify both block height and isSealed.");if(e.block.id)throw new Error("Unable to specify both block height and block id.");return e})])},exports.atBlockId=function(e){return Q([function(t){return t.block.id=e,v(t)},Pt(function(e,t){var n=t.Ok,r=t.Bad;return K(e)?r(e,"Unable to specify a block id with a Get Account interaction."):"boolean"==typeof e.block.isSealed?r(e,"Unable to specify both block id and isSealed."):e.block.height?r(e,"Unable to specify both block id and block height."):n(e)})])},exports.authorization=function(e,t,n,r){return{addr:e,signingFunction:t,keyId:n,sequenceNum:r}},exports.authorizations=function(e){return void 0===e&&(e=[]),Q(e.map(function(e){return I(e,{role:"authorizer"})}))},exports.build=_e,exports.decode=function(e){try{return Promise.resolve(r.config().where(/^decoder\./)).then(function(t){var n=Object.entries(t).map(function(e){var t=e[0],n=e[1];return[t="/"+t.replace(/^decoder\./,"")+"$/",n]});return it(e,Object.fromEntries(n))})}catch(e){return Promise.reject(e)}},exports.destroy=function(e){return function(t){return delete t.assigns[e],v(t)}},exports.get=ee,exports.getAccount=Qe,exports.getBlock=Xe,exports.getBlockByHeight=function(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockByHeight builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0003-deprecate-get-block-by-height-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Q([N,function(t){return t.block.height=e,v(t)}])},exports.getBlockById=function(e){return console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getBlockById builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0004-deprecate-get-block-by-id-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Q([E,function(t){return t.block.ids=[e],v(t)}])},exports.getBlockHeader=function(e){return void 0===e&&(e=null),Q([j,function(t){return t.block.isSealed=e,v(t)}])},exports.getCollection=function(e){return void 0===e&&(e=null),Q([O,function(t){return t.collection.id=e,t}])},exports.getEvents=function(e,t,n){return void 0===t&&void 0===n||console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing a start and end into getEnvents has been deprecated and will not be supported in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0005-deprecate-start-end-get-events-builder\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),Q([w,function(r){return r.events.eventType=e,r.events.start=t,r.events.end=n,v(r)}])},exports.getEventsAtBlockHeightRange=function(e,t,n){return Q([w,function(r){return r.events.eventType=e,r.events.start=t,r.events.end=n,v(r)}])},exports.getEventsAtBlockIds=function(e,t){return void 0===t&&(t=[]),Q([w,function(n){return n.events.eventType=e,n.events.blockIds=t,v(n)}])},exports.getLatestBlock=function(e){return void 0===e&&(e=!1),console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n\n    The getLatestBlock builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0006-deprecate-get-latest-block-builder\n\n    ============================\n  ","font-weight:bold;font-family:monospace;"),Q([T,function(t){return t.block.isSealed=e,v(t)}])},exports.getTransaction=function(e){return Q([x,function(t){return t.transaction.id=e,v(t)}])},exports.getTransactionStatus=function(e){return Q([B,function(t){return t.transaction.id=e,v(t)}])},exports.interaction=m,exports.invariant=function e(){var t=[].slice.call(arguments);if(t.length>1){var n=t,r=n[0],o=n[1];return e(function(e,t){var n=t.Bad;return r?(0,t.Ok)(e):n(e,o)})}var s=t[0];return function(e){return s(e,{Ok:v,Bad:y})}},exports.isBad=$,exports.isGetAccount=K,exports.isGetBlock=W,exports.isGetBlockByHeight=J,exports.isGetBlockById=z,exports.isGetBlockHeader=M,exports.isGetCollection=V,exports.isGetEvents=q,exports.isGetLatestBlock=F,exports.isGetTransaction=H,exports.isGetTransactionStatus=D,exports.isOk=function(e){return"OK"===e.status},exports.isPing=Y,exports.isScript=C,exports.isTransaction=U,exports.isUnknown=R,exports.latestBlock=function(){var e=[].slice.call(arguments),t=e[1]||("object"==typeof e[0]?e[0]:void 0),n="boolean"==typeof e[0]?e[0]:void 0;return"object"==typeof e[0]&&console.warn("\n      %cFCL/SDK Deprecation Notice\n      ============================\n  \n      Passing options as the first arguement to the latestBlock function has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0007-deprecate-opts-first-arg-latest-block\n  \n      ============================\n    ","font-weight:bold;font-family:monospace;"),bt([Xe(n)],t).then(it)},exports.limit=function(e){return function(t){return t.message.computeLimit=e,t}},exports.param=function(e){return t={name:"param",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.warn("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+t.name+" builder has been deprecated and will be removed in future versions of the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+t.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var t},exports.params=function(e){return t={name:"params",transitionsPath:"https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0001-deprecate-params"},void console.error("\n    %cFCL/SDK Deprecation Notice\n    ============================\n    The "+t.name+" builder has been removed from the Flow JS-SDK/FCL.\n    You can learn more (including a guide on common transition paths) here: "+t.transitionsPath+"\n    ============================\n  ","font-weight:bold;font-family:monospace;");var t},exports.payer=function(e){try{return Promise.resolve(I(e,{role:"payer"}))}catch(e){return Promise.reject(e)}},exports.ping=function(){return G},exports.pipe=Q,exports.proposer=function(e){try{return Promise.resolve(I(e,{role:"proposer"}))}catch(e){return Promise.reject(e)}},exports.put=te,exports.ref=function(e){return Q([function(t){return t.message.refBlock=e,v(t)}])},exports.resolve=It,exports.resolveAccounts=ht,exports.resolveArguments=lt,exports.resolveParams=function(e){return console.error("\n      %cFCL/SDK Deprecation Notice\n      ============================\n\n      The resolver sdk.resolveParams is being replaced with the package @onflow/sdk-resolve-cadence\n      You can learn more (including a guide on common transition paths) here: https://github.com/onflow/flow-js-sdk/blob/master/packages/sdk/TRANSITIONS.md#0002-deprecate-resolve-params-resolver\n\n      ============================\n    ","font-weight:bold;font-family:monospace;"),at(e)},exports.resolveRefBlockId=function(e){return function(t){try{return U(t)?t.message.refBlock?Promise.resolve(v(t)):Promise.resolve(function(e){try{var t;return Promise.resolve(Q(m(),[Xe()])).then(function(n){return t=n,Promise.resolve($e(t,e)).then(function(e){return t=e,Promise.resolve(it(t)).then(function(e){return(t=e).id})})})}catch(e){return Promise.reject(e)}}(e)).then(function(e){return t.message.refBlock=e,v(t)}):Promise.resolve(v(t))}catch(e){return Promise.reject(e)}}},exports.resolveSignatures=xe,exports.resolveValidators=kt,exports.script=function(){return Q([P,te("ix.cadence",a.template.apply(void 0,[].slice.call(arguments)))])},exports.send=bt,exports.transaction=function(){return Q([S,te("ix.cadence",a.template.apply(void 0,[].slice.call(arguments))),function(e){return e.message.computeLimit=e.message.computeLimit||10,e.message.refBlock=e.message.refBlock||null,e.authorizations=e.authorizations||St,v(e)}])},exports.update=ne,exports.validator=Pt,exports.why=function(e){return e.reason};
//# sourceMappingURL=sdk.js.map
