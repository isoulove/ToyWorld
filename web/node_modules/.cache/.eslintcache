[{"/Users/wuchao/flow/nft/ToyWorld/web/src/index.js":"1","/Users/wuchao/flow/nft/ToyWorld/web/src/reportWebVitals.js":"2","/Users/wuchao/flow/nft/ToyWorld/web/src/global/providers.comp.js":"3","/Users/wuchao/flow/nft/ToyWorld/web/src/pages/not-found.page.js":"4","/Users/wuchao/flow/nft/ToyWorld/web/src/global/config.js":"5","/Users/wuchao/flow/nft/ToyWorld/web/src/pages/root.page.js":"6","/Users/wuchao/flow/nft/ToyWorld/web/src/theme.js":"7","/Users/wuchao/flow/nft/ToyWorld/web/src/pages/account/index.js":"8","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/base.comp.js":"9","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-current-user.hook.js":"10","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-url-address.hook.js":"11","/Users/wuchao/flow/nft/ToyWorld/web/src/global/constants.js":"12","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-market-items.hook.js":"13","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-account-items.hook.js":"14","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-initialized.hook.js":"15","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-kibbles-balance.hook.js":"16","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/auth-cluster.comp.js":"17","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/init-cluster.comp.js":"18","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/balance-cluster.comp.js":"19","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/market-items-cluster.comp.js":"20","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/account-items-cluster.comp.js":"21","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-flow-balance.hook.js":"22","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/market-item-cluster.comp.js":"23","/Users/wuchao/flow/nft/ToyWorld/web/src/parts/account-item-cluster.comp.js":"24","/Users/wuchao/flow/nft/ToyWorld/web/src/util/fetcher.js":"25","/Users/wuchao/flow/nft/ToyWorld/web/src/util/fmt-kibbles.js":"26","/Users/wuchao/flow/nft/ToyWorld/web/src/util/normalize-item.js":"27","/Users/wuchao/flow/nft/ToyWorld/web/src/util/sleep.js":"28","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-account-items.script.js":"29","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/initialize-account.tx.js":"30","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-kibbles-balance.script.js":"31","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/is-account-initialized.script.js":"32","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-flow-balance.script.js":"33","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-market-item.hook.js":"34","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-account-item.hook.js":"35","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/util/tx.js":"36","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-market-item.script.js":"37","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/buy-market-item.tx.js":"38","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-account-item.script.js":"39","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/create-sale-offer.tx.js":"40","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/cancel-market-listing.tx.js":"41","/Users/wuchao/flow/nft/ToyWorld/web/src/flow/util/batch.js":"42"},{"size":782,"mtime":1621845346582,"results":"43","hashOfConfig":"44"},{"size":362,"mtime":1621845346586,"results":"45","hashOfConfig":"44"},{"size":441,"mtime":1621845346580,"results":"46","hashOfConfig":"44"},{"size":106,"mtime":1621845346583,"results":"47","hashOfConfig":"44"},{"size":585,"mtime":1621845346579,"results":"48","hashOfConfig":"44"},{"size":941,"mtime":1622441150043,"results":"49","hashOfConfig":"44"},{"size":208,"mtime":1621845346591,"results":"50","hashOfConfig":"44"},{"size":5056,"mtime":1621845346583,"results":"51","hashOfConfig":"44"},{"size":58,"mtime":1621845346585,"results":"52","hashOfConfig":"44"},{"size":550,"mtime":1621845346581,"results":"53","hashOfConfig":"44"},{"size":177,"mtime":1621845346582,"results":"54","hashOfConfig":"44"},{"size":332,"mtime":1621845346579,"results":"55","hashOfConfig":"44"},{"size":1140,"mtime":1621845346582,"results":"56","hashOfConfig":"44"},{"size":1298,"mtime":1621845346580,"results":"57","hashOfConfig":"44"},{"size":1902,"mtime":1621845346581,"results":"58","hashOfConfig":"44"},{"size":1264,"mtime":1621845346581,"results":"59","hashOfConfig":"44"},{"size":1528,"mtime":1621845346584,"results":"60","hashOfConfig":"44"},{"size":2286,"mtime":1621845346585,"results":"61","hashOfConfig":"44"},{"size":2178,"mtime":1621845346585,"results":"62","hashOfConfig":"44"},{"size":1237,"mtime":1621845346586,"results":"63","hashOfConfig":"44"},{"size":1309,"mtime":1621845346584,"results":"64","hashOfConfig":"44"},{"size":829,"mtime":1621845346581,"results":"65","hashOfConfig":"44"},{"size":2157,"mtime":1621845346586,"results":"66","hashOfConfig":"44"},{"size":2726,"mtime":1621845346584,"results":"67","hashOfConfig":"44"},{"size":82,"mtime":1621845346592,"results":"68","hashOfConfig":"44"},{"size":219,"mtime":1621845346592,"results":"69","hashOfConfig":"44"},{"size":262,"mtime":1621845346592,"results":"70","hashOfConfig":"44"},{"size":103,"mtime":1621845346593,"results":"71","hashOfConfig":"44"},{"size":765,"mtime":1621845346576,"results":"72","hashOfConfig":"44"},{"size":3178,"mtime":1621845346578,"results":"73","hashOfConfig":"44"},{"size":635,"mtime":1621845346577,"results":"74","hashOfConfig":"44"},{"size":1675,"mtime":1621845346578,"results":"75","hashOfConfig":"44"},{"size":185,"mtime":1621845346577,"results":"76","hashOfConfig":"44"},{"size":2643,"mtime":1621845346581,"results":"77","hashOfConfig":"44"},{"size":1883,"mtime":1621845346580,"results":"78","hashOfConfig":"44"},{"size":1222,"mtime":1621845346578,"results":"79","hashOfConfig":"44"},{"size":1166,"mtime":1621845346577,"results":"80","hashOfConfig":"44"},{"size":2335,"mtime":1621845346575,"results":"81","hashOfConfig":"44"},{"size":1953,"mtime":1621845346576,"results":"82","hashOfConfig":"44"},{"size":2929,"mtime":1621845346576,"results":"83","hashOfConfig":"44"},{"size":891,"mtime":1621845346576,"results":"84","hashOfConfig":"44"},{"size":2162,"mtime":1621845346578,"results":"85","hashOfConfig":"44"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},"sh79p",{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"155","usedDeprecatedRules":"88"},{"filePath":"156","messages":"157","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"162","messages":"163","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"164","messages":"165","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"166","messages":"167","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},{"filePath":"170","messages":"171","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"88"},"/Users/wuchao/flow/nft/ToyWorld/web/src/index.js",[],["172","173"],"/Users/wuchao/flow/nft/ToyWorld/web/src/reportWebVitals.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/global/providers.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/pages/not-found.page.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/global/config.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/pages/root.page.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/theme.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/pages/account/index.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/base.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-current-user.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-url-address.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/global/constants.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-market-items.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-account-items.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-initialized.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-kibbles-balance.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/auth-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/init-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/balance-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/market-items-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/account-items-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-flow-balance.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/market-item-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/parts/account-item-cluster.comp.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/util/fetcher.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/util/fmt-kibbles.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/util/normalize-item.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/util/sleep.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-account-items.script.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/initialize-account.tx.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-kibbles-balance.script.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/is-account-initialized.script.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-flow-balance.script.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-market-item.hook.js",["174"],"import {useEffect} from \"react\"\nimport {atomFamily, selectorFamily, useRecoilState} from \"recoil\"\nimport {sansPrefix} from \"@onflow/fcl\"\nimport {IDLE, PROCESSING} from \"../global/constants\"\nimport {useCurrentUser} from \"../hooks/use-current-user.hook\"\nimport {useAccountItems} from \"../hooks/use-account-items.hook\"\nimport {useKibblesBalance} from \"../hooks/use-kibbles-balance.hook\"\nimport {fetchMarketItem} from \"../flow/fetch-market-item.script\"\nimport {buyMarketItem} from \"../flow/buy-market-item.tx\"\nimport {cancelMarketListing} from \"../flow/cancel-market-listing.tx\"\n\nfunction expand(key) {\n  return key.split(\"|\")\n}\n\nfunction comp(address, id) {\n  return [address, id].join(\"|\")\n}\n\nexport const $state = atomFamily({\n  key: \"market-item::state\",\n  default: selectorFamily({\n    key: \"market-item::default\",\n    get: key => async () => await fetchMarketItem(...expand(key)),\n  }),\n})\n\nexport const $status = atomFamily({\n  key: \"market-item::status\",\n  default: IDLE,\n})\n\nexport function useMarketItem(address, id) {\n  const [cu] = useCurrentUser()\n  const ownerItems = useAccountItems(address)\n  const cuItems = useAccountItems(cu.addr)\n  const kibble = useKibblesBalance(cu.addr)\n  const key = comp(address, id)\n  const [item, setItem] = useRecoilState($state(key))\n  const [status, setStatus] = useRecoilState($status(key))\n  const owned = sansPrefix(cu.addr) === sansPrefix(address)\n\n  useEffect(() => {\n    fetchMarketItem(...expand(key)).then(setItem)\n  }, [])\n\n  return {\n    ...item,\n    status,\n    owned,\n    async buy() {\n      await buyMarketItem(\n        {itemID: id, ownerAddress: address},\n        {\n          onStart() {\n            setStatus(PROCESSING)\n          },\n          async onSuccess() {\n            if (address !== cu.addr) {\n              ownerItems.refresh()\n            }\n            cuItems.refresh()\n            kibble.refresh()\n          },\n          async onComplete() {\n            setStatus(IDLE)\n          },\n          async onError(error) {\n            // TODO: Handle error\n          },\n        }\n      )\n    },\n    async cancelListing() {\n      await cancelMarketListing(\n        {itemID: id},\n        {\n          onStart() {\n            setStatus(PROCESSING)\n          },\n          async onSuccess() {\n            cuItems.refresh()\n            kibble.refresh()\n          },\n          async onComplete() {\n            setStatus(IDLE)\n          },\n          async onError(error) {\n            // TODO: Handle error\n          },\n        }\n      )\n    },\n    async refresh() {\n      setStatus(PROCESSING)\n      await fetchMarketItem(...expand(key)).then(setItem)\n      setStatus(IDLE)\n    },\n  }\n}\n","/Users/wuchao/flow/nft/ToyWorld/web/src/hooks/use-account-item.hook.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/util/tx.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-market-item.script.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/buy-market-item.tx.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/fetch-account-item.script.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/create-sale-offer.tx.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/cancel-market-listing.tx.js",[],"/Users/wuchao/flow/nft/ToyWorld/web/src/flow/util/batch.js",[],{"ruleId":"175","replacedBy":"176"},{"ruleId":"177","replacedBy":"178"},{"ruleId":"179","severity":1,"message":"180","line":45,"column":6,"nodeType":"181","endLine":45,"endColumn":8,"suggestions":"182"},"no-native-reassign",["183"],"no-negated-in-lhs",["184"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'key' and 'setItem'. Either include them or remove the dependency array.","ArrayExpression",["185"],"no-global-assign","no-unsafe-negation",{"desc":"186","fix":"187"},"Update the dependencies array to be: [key, setItem]",{"range":"188","text":"189"},[1471,1473],"[key, setItem]"]