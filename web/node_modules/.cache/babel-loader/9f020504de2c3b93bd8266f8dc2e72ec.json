{"ast":null,"code":"import { config as e } from \"@onflow/config\";\nexport { config } from \"@onflow/config\";\nimport { resolve as t, send as r, script as n, args as o, limit as i, decode as u, arg as a, pipe as s, interaction as c, getTransactionStatus as l, latestBlock as d } from \"@onflow/sdk\";\nexport { account, arg, args, atBlockHeight, atBlockId, authorization, authorizations, build, decode, getAccount, getBlock, getBlockByHeight, getBlockById, getBlockHeader, getCollection, getEvents, getEventsAtBlockHeightRange, getEventsAtBlockIds, getLatestBlock, getTransaction, getTransactionStatus, invariant, isBad, isOk, latestBlock, limit, param, params, payer, ping, pipe, proposer, ref, script, send, transaction, validator, why } from \"@onflow/sdk\";\nimport { invariant as f } from \"@onflow/util-invariant\";\nimport * as h from \"@onflow/types\";\nimport { INIT as p, SUBSCRIBE as m, UPDATED as v, UNSUBSCRIBE as y, SNAPSHOT as P, subscriber as g, spawn as E, snapshoter as w, send as b } from \"@onflow/util-actor\";\nimport { withPrefix as S, sansPrefix as R } from \"@onflow/util-address\";\nexport { display, sansPrefix, withPrefix } from \"@onflow/util-address\";\nimport { encode as I } from \"@onflow/rlp\";\nimport { uid as A } from \"@onflow/util-uid\";\nexport { template as cadence, template as cdc } from \"@onflow/util-template\";\ne().put(\"accessNode.api\", \"http://localhost:8080\").put(\"challenge.handshake\", \"http://localhost:8700/authenticate\"), e().put(\"sdk.resolve\", t);\n\nvar T,\n    j,\n    k = \"0.0.70\",\n    C = function (e) {\n  void 0 === e && (e = {});\n\n  try {\n    return Promise.resolve(function (e) {\n      try {\n        return f(O(e.cadence), \"query({ cadence }) -- cadence is required\"), f(N(e.cadence), \"query({ cadence }) -- cadence must be a string\"), Promise.resolve();\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }(e)).then(function () {\n      return r([n(e.cadence), o((t = e.args || [], \"function\" == typeof t ? t(a, h) : [])), e.limit && \"number\" == typeof e.limit && i(e.limit)]).then(u);\n      var t;\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    O = function (e) {\n  return null != typeof e;\n},\n    N = function (e) {\n  return \"string\" == typeof e;\n},\n    _ = function (r, n) {\n  void 0 === r && (r = []), void 0 === n && (n = {});\n\n  try {\n    return Promise.resolve(e().get(\"sdk.resolve\", n.resolve || t(n))).then(function (e) {\n      function t() {\n        return Promise.resolve(e(r)).then(function (e) {\n          return JSON.stringify(e, null, 2);\n        });\n      }\n\n      var n = function () {\n        if (Array.isArray(r)) return Promise.resolve(s(c(), r)).then(function (e) {\n          r = e;\n        });\n      }();\n\n      return n && n.then ? n.then(t) : t();\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    x = function (e) {\n  try {\n    return Promise.resolve(r([l(e)]).then(u));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    L = function (e) {\n  return e.status >= 4;\n},\n    U = function (e) {\n  return e.status >= 3;\n},\n    D = function (e) {\n  return e.status >= 2;\n},\n    z = ((T = {})[p] = function (e) {\n  try {\n    return Promise.resolve(x(e.self())).then(function (t) {\n      L(t) || setTimeout(function () {\n        return e.sendSelf(\"POLL\");\n      }, 2500), e.merge(t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, T[m] = function (e, t) {\n  e.subscribe(t.from), e.send(t.from, v, e.all());\n}, T[y] = function (e, t) {\n  e.unsubscribe(t.from);\n}, T[P] = function (e, t) {\n  try {\n    return t.reply(e.all()), Promise.resolve();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, T.POLL = function (e) {\n  try {\n    return Promise.resolve(x(e.self())).then(function (t) {\n      var r, n;\n      L(t) || setTimeout(function () {\n        return e.sendSelf(\"POLL\");\n      }, 2500), r = e.all(), n = t, JSON.stringify(r) !== JSON.stringify(n) && e.broadcast(v, t), e.merge(t);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, T),\n    F = function (e) {\n  if (\"object\" == typeof e && (e = e.transactionId), null == e) throw new Error(\"transactionId required\");\n  return e;\n},\n    H = function (e) {\n  return E(z, F(e));\n};\n\nfunction B(e) {\n  function t(t) {\n    return g(F(e), H, t);\n  }\n\n  function r(e) {\n    return function (r) {\n      void 0 === r && (r = {});\n      var n = r.suppress || !1;\n      return new Promise(function (r, o) {\n        var i = t(function (t) {\n          t.statusCode && !n ? (o(t.errorMessage), i()) : e(t) && (r(t), i());\n        });\n      });\n    };\n  }\n\n  return {\n    snapshot: function () {\n      return w(e, H);\n    },\n    subscribe: t,\n    onceFinalized: r(D),\n    onceExecuted: r(U),\n    onceSealed: r(L)\n  };\n}\n\nfunction M() {\n  return (M = Object.assign || function (e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var r = arguments[t];\n\n      for (var n in r) Object.prototype.hasOwnProperty.call(r, n) && (e[n] = r[n]);\n    }\n\n    return e;\n  }).apply(this, arguments);\n}\n\nfunction J(e, t) {\n  (null == t || t > e.length) && (t = e.length);\n\n  for (var r = 0, n = new Array(t); r < t; r++) n[r] = e[r];\n\n  return n;\n}\n\nfunction G(e, t) {\n  var r;\n\n  if (\"undefined\" == typeof Symbol || null == e[Symbol.iterator]) {\n    if (Array.isArray(e) || (r = function (e, t) {\n      if (e) {\n        if (\"string\" == typeof e) return J(e, void 0);\n        var r = Object.prototype.toString.call(e).slice(8, -1);\n        return \"Object\" === r && e.constructor && (r = e.constructor.name), \"Map\" === r || \"Set\" === r ? Array.from(e) : \"Arguments\" === r || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r) ? J(e, void 0) : void 0;\n      }\n    }(e)) || t && e && \"number\" == typeof e.length) {\n      r && (e = r);\n      var n = 0;\n      return function () {\n        return n >= e.length ? {\n          done: !0\n        } : {\n          done: !1,\n          value: e[n++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  return (r = e[Symbol.iterator]()).next.bind(r);\n}\n\nB.isUnknown = function (e) {\n  return e.status >= 0;\n}, B.isPending = function (e) {\n  return e.status >= 1;\n}, B.isFinalized = D, B.isExecuted = U, B.isSealed = L, B.isExpired = function (e) {\n  return 5 === e.status;\n};\n\nvar q = function (t) {\n  try {\n    var r = setTimeout;\n    return Promise.resolve(e().get(\"fcl.eventPollRate\", 1e4)).then(function (e) {\n      return r(function () {\n        return t.sendSelf(\"TICK\");\n      }, e);\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Y = ((j = {}).TICK = function (e) {\n  try {\n    if (!e.hasSubs()) return Promise.resolve();\n\n    var t = e.get(\"hwm\"),\n        n = function () {\n      if (null == t) {\n        var n = e.put;\n        return Promise.resolve(d()).then(function (t) {\n          n.call(e, \"hwm\", t);\n          var r = e.put;\n          return Promise.resolve(q(e)).then(function (t) {\n            r.call(e, \"tick\", t);\n          });\n        });\n      }\n\n      return Promise.resolve(d()).then(function (n) {\n        return e.put(\"hwm\", n), Promise.resolve(r([getEvents(e.self(), t.height, n.height - 1)]).then(u)).then(function (t) {\n          for (var r, n = G(t); !(r = n()).done;) e.broadcast(\"UPDATED\", r.value.data);\n\n          var o = e.put;\n          return Promise.resolve(q(e)).then(function (t) {\n            o.call(e, \"tick\", t);\n          });\n        });\n      });\n    }();\n\n    return Promise.resolve(n && n.then ? n.then(function () {}) : void 0);\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, j[m] = function (e, t) {\n  try {\n    var r = function () {\n      e.subscribe(t.from);\n    },\n        n = function () {\n      if (!e.hasSubs()) {\n        var t = e.put;\n        return Promise.resolve(q(e)).then(function (r) {\n          t.call(e, \"tick\", r);\n        });\n      }\n    }();\n\n    return Promise.resolve(n && n.then ? n.then(r) : r());\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, j[y] = function (e, t) {\n  e.unsubscribe(t.from), e.hasSubs() || (clearTimeout(e.get(\"tick\")), e.delete(\"tick\"), e.delete(\"hwm\"));\n}, j),\n    V = function (e) {\n  return E(Y, e);\n};\n\nfunction Z(e) {\n  return {\n    subscribe: function (t) {\n      return g(e, V, t);\n    }\n  };\n}\n\nvar K = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\"\n},\n    X = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\"\n},\n    W = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\"\n},\n    $ = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\"\n},\n    Q = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\"\n};\n\nfunction ee(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return M({\n        old: e\n      }, K, {\n        type: \"frame\",\n        endpoint: e.endpoint,\n        params: e.params || {},\n        data: e.data || {}\n      });\n  }\n}\n\nfunction te(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return M({}, K, {\n        type: \"back-channel-rpc\",\n        endpoint: e.endpoint,\n        method: e.method,\n        params: e.params || {},\n        data: e.data || {}\n      });\n  }\n}\n\nvar re = {\n  \"back-channel-rpc\": te,\n  \"pre-authz\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return M({}, K, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.endpoint,\n          method: e.method,\n          identity: M({}, X, {\n            address: S(e.addr),\n            keyId: e.keyId\n          }),\n          params: e.params,\n          data: e.data\n        });\n    }\n  },\n  authz: function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return M({}, K, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.endpoint,\n          method: e.method,\n          identity: M({}, X, {\n            address: S(e.addr),\n            keyId: e.keyId\n          }),\n          params: e.params,\n          data: e.data\n        });\n    }\n  },\n  authn: function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return M({}, K, {\n          type: e.type,\n          uid: e.id,\n          endpoint: e.authn,\n          id: e.pid,\n          provider: {\n            address: S(e.addr),\n            name: e.name,\n            icon: e.icon\n          }\n        });\n    }\n  },\n  frame: ee,\n  \"open-id\": function (e) {\n    if (null == e) return null;\n\n    switch (e.f_vsn) {\n      case \"1.0.0\":\n        return e;\n\n      default:\n        return null;\n    }\n  }\n};\n\nfunction ne(e) {\n  return I([e.provider.address || e.provider.name || \"UNSPECIFIED\", e.id]).toString(\"hex\");\n}\n\nfunction oe(e, t) {\n  return void 0 === e && (e = []), e.find(function (e) {\n    return e.type === t;\n  });\n}\n\nfunction ie(e) {\n  var t = new URL(e.endpoint);\n  if (t.searchParams.append(\"l6n\", window.location.origin), null != e.params) for (var r = 0, n = Object.entries(e.params || {}); r < n.length; r++) {\n    var o = n[r];\n    t.searchParams.append(o[0], o[1]);\n  }\n  return t;\n}\n\nfunction ue(e, t) {\n  void 0 === t && (t = {});\n  var r = t.method || \"POST\",\n      n = \"GET\" === r ? void 0 : JSON.stringify(t.data || e.data || {});\n  return fetch(ie(e), {\n    method: r,\n    headers: M({}, e.headers || {}, t.headers || {}, {\n      \"Content-Type\": \"application/json\"\n    }),\n    body: n\n  }).then(function (e) {\n    return e.json();\n  });\n}\n\nfunction ae(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return M({}, $, {\n        status: e.status,\n        reason: e.reason,\n        data: e.compositeSignature || e.data || {},\n        updates: te(e.authorizationUpdates),\n        local: ee((e.local || [])[0])\n      });\n  }\n}\n\nfunction se(e) {\n  if (null == e) return null;\n\n  switch (e.f_vsn) {\n    case \"1.0.0\":\n      return e;\n\n    default:\n      return M({}, Q, {\n        addr: R(e.addr || e.address),\n        signature: e.signature || e.sig,\n        keyId: e.keyId\n      });\n  }\n}\n\nvar ce = \"FCL_IFRAME\",\n    le = function () {},\n    de = new Set([\"monetizationstart\", \"monetizationpending\", \"monetizationprogress\", \"monetizationstop\"]);\n\nfunction fe(e, t) {\n  if (void 0 === t && (t = {}), null == e) return {\n    send: le,\n    close: le\n  };\n  var r = t.onClose || le,\n      n = t.onMessage || le,\n      o = t.onReady || le,\n      i = t.onResponse || le;\n  window.addEventListener(\"message\", c);\n\n  var u = function (e) {\n    f(!document.getElementById(ce), \"Attempt at triggering multiple Frames\", {\n      src: e\n    });\n    var t = document.createElement(\"iframe\");\n    return t.src = e, t.id = ce, t.allow = \"usb *\", t.frameBorder = \"0\", t.style.cssText = \"\\n  position:fixed;\\n  top: 0px;\\n  right: 0px;\\n  bottom: 0px;\\n  left: 0px;\\n  height: 100vh;\\n  width: 100vw;\\n  display:block;\\n  background:rgba(0,0,0,0.25);\\n  z-index: 2147483647;\\n  box-sizing: border-box;\\n\", document.body.append(t), [t, function () {\n      document.getElementById(ce) && document.getElementById(ce).remove();\n    }];\n  }(ie(e)),\n      a = u[0],\n      s = u[1];\n\n  return {\n    send: d,\n    close: l\n  };\n\n  function c(e) {\n    try {\n      if (\"object\" != typeof e.data) return;\n      if (de.has(e.data.type)) return;\n      \"FCL:FRAME:CLOSE\" === e.data.type && l(), \"FCL:FRAME:READY\" === e.data.type && o(e, {\n        send: d,\n        close: l\n      }), \"FCL:FRAME:RESPONSE\" === e.data.type && i(e, {\n        send: d,\n        close: l\n      }), n(e, {\n        send: d,\n        close: l\n      }), \"FCL::CHALLENGE::RESPONSE\" === e.data.type && i(e, {\n        send: d,\n        close: l\n      }), \"FCL::AUTHZ_READY\" === e.data.type && o(e, {\n        send: d,\n        close: l\n      }), \"FCL::CHALLENGE::CANCEL\" === e.data.type && l(), \"FCL::CANCEL\" === e.data.type && l();\n    } catch (e) {\n      console.error(\"Frame Callback Error\", e), l();\n    }\n  }\n\n  function l() {\n    try {\n      window.removeEventListener(\"message\", c), s(), r();\n    } catch (e) {\n      console.error(\"Frame Close Error\", e);\n    }\n  }\n\n  function d(e) {\n    try {\n      a.contentWindow.postMessage(JSON.parse(JSON.stringify(e || {})), \"*\");\n    } catch (t) {\n      console.error(\"Frame Send Error\", e, t);\n    }\n  }\n}\n\nvar he,\n    pe = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\"\n},\n    me = function (e) {\n  return f(pe[e.method], \"Invalid Service Method for type back-channel-rpc\", {\n    service: e\n  }), pe[e.method];\n},\n    ve = function (e, t) {\n  try {\n    return t.data = e.data, Promise.resolve(ue(e, {\n      data: t\n    }).then(ae)).then(function (t) {\n      if (\"APPROVED\" === t.status) return t.data;\n      if (\"DECLINED\" === t.status) throw new Error(\"Declined: \" + (t.reason || \"No reason supplied.\"));\n\n      if (\"PENDING\" === t.status) {\n        var r = !0,\n            n = fe(t.local, {\n          onClose: function () {\n            r = !1;\n          }\n        }).close;\n        return function e(t, r) {\n          void 0 === r && (r = function () {\n            return !0;\n          });\n\n          try {\n            if (f(t, \"Missing Polling Service\", {\n              service: t\n            }), !r()) throw new Error(\"Externally Halted\");\n            return Promise.resolve(ue(t, {\n              method: me(t)\n            }).then(ae)).then(function (t) {\n              switch (t.status) {\n                case \"APPROVED\":\n                  return t.data;\n\n                case \"DECLINED\":\n                  throw new Error(\"Declined: \" + (t.reason || \"No reason supplied.\"));\n\n                default:\n                  return Promise.resolve(new Promise(function (e) {\n                    return setTimeout(e, 500);\n                  })).then(function () {\n                    return e(t.updates, r);\n                  });\n              }\n            });\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }(t.updates, function () {\n          return r;\n        }).then(function (e) {\n          return n(), se(e);\n        }).catch(function (e) {\n          throw console.error(e), n(), e;\n        });\n      }\n\n      throw console.error(\"Auto Decline: Invalid Response\", {\n        service: e,\n        resp: t\n      }), new Error(\"Auto Decline: Invalid Response\");\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    ye = function (e, t) {\n  try {\n    try {\n      return Promise.resolve(Pe[e.method](e, t));\n    } catch (r) {\n      throw console.error(\"execService(service, msg)\", r, {\n        service: e,\n        msg: t\n      }), r;\n    }\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Pe = {\n  \"HTTP/RPC\": ve,\n  \"HTTP/POST\": ve,\n  \"IFRAME/RPC\": function (e, t) {\n    return new Promise(function (r, n) {\n      var o = A();\n      t.data = e.data, fe(e, {\n        onReady: function (r, n) {\n          var i = n.send;\n\n          try {\n            i({\n              jsonrpc: \"2.0\",\n              id: o,\n              method: \"fcl:sign\",\n              params: [t, e.params]\n            });\n          } catch (e) {\n            throw e;\n          }\n        },\n        onClose: function () {\n          n(\"Declined: Externally Halted\");\n        },\n        onMessage: function (e, t) {\n          var i = t.close;\n\n          try {\n            if (\"object\" != typeof e.data) return;\n            if (\"2.0\" !== e.data.jsonrpc) return;\n            if (e.data.id !== o) return;\n            var u = ae(e.data.result);\n\n            switch (u.status) {\n              case \"APPROVED\":\n                r(se(u.data)), i();\n                break;\n\n              case \"DECLINED\":\n                n(\"Declined: \" + (u.reason || \"No reason supplied\")), i();\n                break;\n\n              default:\n                n(\"Declined: No reason supplied\"), i();\n            }\n          } catch (e) {\n            throw console.error(\"execIframeRPC onMessage error\", e), e;\n          }\n        }\n      });\n    });\n  }\n};\n\nfunction ge(e, t, r) {\n  if (!e.s) {\n    if (r instanceof we) {\n      if (!r.s) return void (r.o = ge.bind(null, e, t));\n      1 & t && (t = r.s), r = r.v;\n    }\n\n    if (r && r.then) return void r.then(ge.bind(null, e, t), ge.bind(null, e, 2));\n    e.s = t, e.v = r;\n    var n = e.o;\n    n && n(e);\n  }\n}\n\nvar Ee = function (e) {\n  try {\n    return Ne(), Promise.resolve(Se()).then(function (t) {\n      var r = oe(t.services, \"authz\"),\n          n = oe(t.services, \"pre-authz\");\n      return M({}, e, n ? {\n        tempId: \"CURRENT_USER\",\n        resolve: function (e, t) {\n          try {\n            return Promise.resolve(ye(n, t)).then(Le);\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }\n      } : {\n        tempId: \"CURRENT_USER\",\n        resolve: null,\n        addr: R(r.identity.address),\n        keyId: r.identity.keyId,\n        sequenceNum: null,\n        signature: null,\n        signingFunction: function (e) {\n          try {\n            return Promise.resolve(ye(r, e));\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }\n      });\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    we = function () {\n  function e() {}\n\n  return e.prototype.then = function (t, r) {\n    var n = new e(),\n        o = this.s;\n\n    if (o) {\n      var i = 1 & o ? t : r;\n\n      if (i) {\n        try {\n          ge(n, 1, i(this.v));\n        } catch (e) {\n          ge(n, 2, e);\n        }\n\n        return n;\n      }\n\n      return this;\n    }\n\n    return this.o = function (e) {\n      try {\n        var o = e.v;\n        1 & e.s ? ge(n, 1, t ? t(o) : o) : r ? ge(n, 1, r(o)) : ge(n, 2, o);\n      } catch (e) {\n        ge(n, 2, e);\n      }\n    }, n;\n  }, e;\n}();\n\nfunction be(e) {\n  return e instanceof we && 1 & e.s;\n}\n\nvar Se = function () {\n  try {\n    return Promise.resolve(new Promise(function (t, r) {\n      try {\n        return Ne(), Promise.resolve(De()).then(function (r) {\n          return r.loggedIn && _e(r) ? t(r) : Promise.resolve(e().get(\"discovery.wallet\")).then(function (r) {\n            function n(e) {\n              fe({\n                endpoint: e\n              }, {\n                onReady: function (e, t) {\n                  var r = t.send;\n\n                  try {\n                    return Promise.resolve(Re(/^service\\./)).then(function (e) {\n                      return Promise.resolve(Re(/^app\\.detail\\./)).then(function (t) {\n                        r({\n                          type: \"FCL:AUTHN:CONFIG\",\n                          services: e,\n                          app: t\n                        });\n                      });\n                    });\n                  } catch (e) {\n                    return Promise.reject(e);\n                  }\n                },\n                onClose: function () {\n                  try {\n                    return Promise.resolve(De()).then(function (e) {\n                      t(e);\n                    });\n                  } catch (e) {\n                    return Promise.reject(e);\n                  }\n                },\n                onResponse: function (e, r) {\n                  var n = r.close;\n\n                  try {\n                    return Promise.resolve(function (e) {\n                      try {\n                        var t = (e = function (e) {\n                          return e.addr = e.addr ? S(e.addr) : null, e.paddr = e.paddr ? S(e.paddr) : null, e;\n                        }(e)).services || [];\n\n                        return Promise.resolve(function (e, t) {\n                          try {\n                            if (null == e || null == t) return Promise.resolve([]);\n                            var r = new URL(e);\n                            return r.searchParams.append(\"code\", t), Promise.resolve(fetch(r, {\n                              method: \"GET\",\n                              headers: {\n                                \"Content-Type\": \"application/json\"\n                              }\n                            }).then(function (e) {\n                              return e.json();\n                            })).then(function (e) {\n                              if (Array.isArray(e)) return e;\n                              var t = [];\n                              if (Array.isArray(e.authorizations)) for (var r, n = G(e.authorizations); !(r = n()).done;) t.push(M({\n                                type: \"authz\",\n                                keyId: e.keyId\n                              }, r.value));\n                              return null != e.provider && t.push(M({\n                                type: \"authn\",\n                                id: \"wallet-provider#authn\"\n                              }, e.provider)), t;\n                            });\n                          } catch (e) {\n                            return Promise.reject(e);\n                          }\n                        }(e.hks, e.code)).then(function (r) {\n                          var n,\n                              o,\n                              i = (n = t, o = r, void 0 === n && (n = []), void 0 === o && (o = []), [].concat(n, o)).map(function (t) {\n                            return function (e, t) {\n                              try {\n                                return re[e.type](e, t);\n                              } catch (t) {\n                                return console.error(\"Unrecognized FCL Service Type [\" + e.type + \"]\", e, t), e;\n                              }\n                            }(t, e);\n                          }),\n                              u = function (e, t) {\n                            return t.find(function (e) {\n                              return \"authn\" === e.type;\n                            });\n                          }(0, i);\n\n                          return M({}, W, {\n                            addr: S(e.addr),\n                            cid: ne(u),\n                            loggedIn: !0,\n                            services: i,\n                            expiresAt: e.exp\n                          });\n                        });\n                      } catch (e) {\n                        return Promise.reject(e);\n                      }\n                    }(e.data)).then(function (e) {\n                      return b(Ie, Te, e), Promise.resolve(De()).then(function (e) {\n                        t(e), n();\n                      });\n                    });\n                  } catch (e) {\n                    return Promise.reject(e);\n                  }\n                }\n              });\n            }\n\n            return r ? n(r) : Promise.resolve(e().get(\"challenge.handshake\")).then(n);\n          });\n        });\n      } catch (e) {\n        return Promise.reject(e);\n      }\n    }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Re = function (t) {\n  try {\n    return Promise.resolve(e().where(t)).then(function (e) {\n      return Object.fromEntries(Object.entries(e).map(function (e) {\n        var r = e[1];\n        return [e[0].replace(t, \"\"), r];\n      }));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Ie = \"CURRENT_USER\",\n    Ae = \"CURRENT_USER/UPDATED\",\n    Te = \"SET_CURRENT_USER\",\n    je = '{\\n  \"f_type\": \"User\",\\n  \"f_vsn\": \"1.0.0\",\\n  \"addr\":null,\\n  \"cid\":null,\\n  \"loggedIn\":null,\\n  \"expiresAt\":null,\\n  \"services\":[]\\n}',\n    ke = function (e) {\n  try {\n    return sessionStorage.setItem(Ie, JSON.stringify(e)), Promise.resolve(e);\n  } catch (e) {\n    return Promise.reject(e);\n  }\n},\n    Ce = function () {\n  return e().get(\"persistSession\", !0);\n},\n    Oe = ((he = {})[p] = function (e) {\n  try {\n    return e.merge(JSON.parse(je)), Promise.resolve(Ce()).then(function (t) {\n      var r = function () {\n        if (t) return Promise.resolve(function () {\n          try {\n            var e = JSON.parse(je),\n                t = JSON.parse(sessionStorage.getItem(Ie));\n            return null != t && e.f_vsn !== t.f_vsn ? (sessionStorage.removeItem(Ie), Promise.resolve(e)) : Promise.resolve(t || e);\n          } catch (e) {\n            return Promise.reject(e);\n          }\n        }()).then(function (t) {\n          _e(t) && e.merge(t);\n        });\n      }();\n\n      if (r && r.then) return r.then(function () {});\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, he[m] = function (e, t) {\n  e.subscribe(t.from), e.send(t.from, Ae, M({}, e.all()));\n}, he[y] = function (e, t) {\n  e.unsubscribe(t.from);\n}, he.SNAPSHOT = function (e, t) {\n  try {\n    return t.reply(M({}, e.all())), Promise.resolve();\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, he[Te] = function (e, t, r) {\n  try {\n    return e.merge(r), Promise.resolve(Ce()).then(function (t) {\n      t && ke(e.all()), e.broadcast(Ae, M({}, e.all()));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, he.DEL_CURRENT_USER = function (e, t) {\n  try {\n    return e.merge(JSON.parse(je)), Promise.resolve(Ce()).then(function (t) {\n      t && ke(e.all()), e.broadcast(Ae, M({}, e.all()));\n    });\n  } catch (e) {\n    return Promise.reject(e);\n  }\n}, he),\n    Ne = function () {\n  return E(Oe, Ie);\n};\n\nfunction _e(e) {\n  return null == e.expiresAt || 0 === e.expiresAt || e.expiresAt > Date.now();\n}\n\nfunction xe() {\n  Ne(), b(Ie, \"DEL_CURRENT_USER\");\n}\n\nfunction Le(e) {\n  var t = function (e) {\n    return {\n      f_type: \"PreAuthzResponse\",\n      f_vsn: \"1.0.0\",\n      proposer: (e || {}).proposer,\n      payer: (e || {}).payer || [],\n      authorization: (e || {}).authorization || []\n    };\n  }(e),\n      r = [];\n\n  null != t.proposer && r.push([\"PROPOSER\", t.proposer]);\n\n  for (var n, o = G(t.payer || []); !(n = o()).done;) r.push([\"PAYER\", n.value]);\n\n  for (var i, u = G(t.authorization || []); !(i = u()).done;) r.push([\"AUTHORIZER\", i.value]);\n\n  return r.map(function (e) {\n    var t = e[0],\n        r = e[1];\n    return {\n      tempId: [r.identity.address, r.identity.keyId].join(\"|\"),\n      addr: r.identity.address,\n      keyId: r.identity.keyId,\n      signingFunction: function (e) {\n        return ye(r, e);\n      },\n      role: {\n        proposer: \"PROPOSER\" === t,\n        payer: \"PAYER\" === t,\n        authorizer: \"AUTHORIZER\" === t\n      }\n    };\n  });\n}\n\nfunction Ue(e) {\n  Ne();\n  var t = E(function (t) {\n    try {\n      var r;\n      return t.send(Ie, m), Promise.resolve(function (e, t, r) {\n        for (var n;;) {\n          var o = e();\n          if (be(o) && (o = o.v), !o) return i;\n\n          if (o.then) {\n            n = 0;\n            break;\n          }\n\n          var i = r();\n\n          if (i && i.then) {\n            if (!be(i)) {\n              n = 1;\n              break;\n            }\n\n            i = i.s;\n          }\n        }\n\n        var u = new we(),\n            a = ge.bind(null, u, 2);\n        return (0 === n ? o.then(c) : 1 === n ? i.then(s) : (void 0).then(function () {\n          (o = e()) ? o.then ? o.then(c).then(void 0, a) : c(o) : ge(u, 1, i);\n        })).then(void 0, a), u;\n\n        function s(t) {\n          i = t;\n\n          do {\n            if (!(o = e()) || be(o) && !o.v) return void ge(u, 1, i);\n            if (o.then) return void o.then(c).then(void 0, a);\n            be(i = r()) && (i = i.v);\n          } while (!i || !i.then);\n\n          i.then(s).then(void 0, a);\n        }\n\n        function c(e) {\n          e ? (i = r()) && i.then ? i.then(s).then(void 0, a) : s(i) : ge(u, 1, i);\n        }\n      }(function () {\n        return !r && 1;\n      }, 0, function () {\n        return Promise.resolve(t.receive()).then(function (n) {\n          if (\"@EXIT\" === n.tag) return t.send(Ie, y), void (r = 1);\n          e(n.data);\n        });\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  });\n  return function () {\n    return b(t, \"@EXIT\");\n  };\n}\n\nfunction De() {\n  return Ne(), b(Ie, \"SNAPSHOT\", null, {\n    expectReply: !0,\n    timeout: 0\n  });\n}\n\nvar ze = function () {\n  return {\n    authenticate: Se,\n    unauthenticate: xe,\n    authorization: Ee,\n    subscribe: Ue,\n    snapshot: De\n  };\n},\n    Fe = function () {\n  return ze().authenticate();\n},\n    He = function () {\n  return ze().unauthenticate();\n},\n    Be = function () {\n  return ze().unauthenticate(), ze().authenticate();\n},\n    Me = function () {\n  return ze().authenticate();\n},\n    Je = function () {\n  return ze().authenticate();\n},\n    Ge = ze().authorization,\n    qe = h;\n\nexport { k as VERSION, Fe as authenticate, Ge as authz, ze as currentUser, Z as events, Je as logIn, C as query, Be as reauthenticate, _ as serialize, Me as signUp, qe as t, B as tx, He as unauthenticate };","map":{"version":3,"sources":["../src/default-config.js","../src/temp.js","../src/VERSION.js","../src/exec/query.js","../src/serialize/index.js","../src/transaction/index.js","../src/events/index.js","../src/current-user/normalize/__vsn.js","../src/current-user/normalize/frame.js","../src/current-user/normalize/back-channel-rpc.js","../src/current-user/normalize/service.js","../src/current-user/normalize/pre-authz.js","../src/current-user/normalize/authz.js","../src/current-user/normalize/authn.js","../src/current-user/normalize/open-id.js","../src/current-user/build-user.js","../src/current-user/service-of-type.js","../src/current-user/exec-service/strategies/utils/service-endpoint.js","../src/current-user/exec-service/strategies/utils/fetch-service.js","../src/current-user/normalize/polling-response.js","../src/current-user/normalize/composite-signature.js","../src/current-user/exec-service/strategies/utils/render-frame.js","../src/current-user/exec-service/strategies/utils/frame.js","../src/current-user/exec-service/strategies/utils/poll.js","../src/current-user/exec-service/strategies/http-post.js","../src/current-user/exec-service/index.js","../src/current-user/exec-service/strategies/iframe-rpc.js","../src/current-user/index.js","../src/current-user/fetch-services.js","../src/current-user/merge-services.js","../src/fcl.js"],"names":["config","put","resolve","VERSION","isRequired","d","isString","query","opts","preQuery","sdk","cadence","args","limit","then","invariant","ax","t","serialize","resolveFunction","get","defaultResolve","Array","isArray","pipe","interaction","JSON","stringify","fetchTxStatus","transactionId","fclSend","getTransactionStatus","decode","tx","status","isSealed","isExecuted","isFinalized","cur","next","HANDLERS","INIT","ctx","self","setTimeout","sendSelf","merge","SUBSCRIBE","letter","subscribe","from","send","UPDATED","all","UNSUBSCRIBE","unsubscribe","SNAPSHOT","reply","broadcast","scoped","Error","spawnTransaction","spawn","transaction","snapshoter","callback","subscriber","once","predicate","suppress","Promise","reject","unsub","txStatus","statusCode","errorMessage","snapshot","onceFinalized","onceExecuted","onceSealed","isUnknown","isPending","isExpired","scheduleTick","hasSubs","hwm","latestBlock","data","getEvents","height","clearTimeout","spawnEvents","key","events","SERVICE_PRAGMA","f_type","f_vsn","IDENTITY_PRAGMA","USER_PRAGMA","POLLING_RESPONSE_PRAGMA","COMPOSITE_SIGNATURE_PRAGMA","normalizeFrame","service","old","type","endpoint","params","normalizeBackChannelRpc","method","serviceNormalizers","back-channel-rpc","pre-authz","authz","authn","frame","open-id","error","console","uid","id","identity","address","withPrefix","addr","keyId","pid","provider","name","icon","deriveCompositeId","rlp","toString","paddr","services","find","normalizeData","fetchServices","hks","code","map","normalizeService","findService","cid","loggedIn","expiresAt","exp","serviceOfType","serviceEndpoint","url","URL","searchParams","append","window","location","origin","Object","entries","fetchService","body","undefined","fetch","headers","Content-Type","json","normalizePollingResponse","resp","reason","compositeSignature","updates","authorizationUpdates","local","normalizeCompositeSignature","sansPrefix","signature","sig","FRAME","src","document","getElementById","$frame","createElement","allow","frameBorder","style","cssText","remove","noop","IGNORE","Set","close","onClose","onMessage","onReady","onResponse","addEventListener","internal","unmount","renderFrame","e","has","removeEventListener","msg","contentWindow","postMessage","parse","OPTIONS","HTTP/GET","HTTP/POST","serviceMethod","poll","canContinue","r","execHttpPost","signable","closeFrame","STRATEGIES","HTTP/RPC","IFRAME/RPC","execService","_","jsonrpc","result","_Pact","prototype","onFulfilled","onRejected","state","this","s","_settle","NAME","v","SET_CURRENT_USER","DATA","o","_this","value","coldStorage","fallback","stored","sessionStorage","getItem","removeItem","setItem","pact","canColdStorage","bind","user","notExpired","observer","_isSettledPact","thenable","spawnCurrentUser","Date","now","configLens","regex","fromEntries","where","replace","authenticate","app","buildUser","unauthenticate","proposer","payer","authorization","resolvePreAuthz","normalizePreAuthzResponse","axs","push","role","az","tempId","join","signingFunction","authorizer","account","preAuthz","preSignable","sequenceNum","receive","tag","_exit2","expectReply","timeout","currentUser","test","update","stage","shouldContinue","updateValue","_resumeAfterTest","_resumeAfterBody","servicesURL","authorizations","sx1","sx2","reauthenticate","signUp","logIn","types"],"mappings":"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","sourcesContent":["import {config} from \"@onflow/config\"\n\nconfig()\n  .put(\"accessNode.api\", \"http://localhost:8080\")\n  .put(\"challenge.handshake\", \"http://localhost:8700/authenticate\")\n","import {config} from \"@onflow/config\"\nimport {resolve} from \"@onflow/sdk\"\n\nconfig().put(\"sdk.resolve\", resolve)\n","export const VERSION = \"0.0.70\"\n","import {invariant} from \"@onflow/util-invariant\"\nimport * as sdk from \"@onflow/sdk\"\n// import {send, script, decode, limit, args, arg} from \"@onflow/sdk\"\nimport * as t from \"@onflow/types\"\n\nconst isRequired = d => typeof d != null\nconst isString = d => typeof d === \"string\"\nconst isFunc = d => typeof d === \"function\"\n\n/** Query the Flow Blockchain\n *\n *  @arg {Object} opts         - Query Options and configuration\n *  @arg {string} opts.cadence - Cadence Script used to query Flow\n *  @arg {ArgsFn} opts.args    - Arguments passed to cadence script\n *  @arg {number} opts.limit   - Compute Limit for Query\n *  @returns {Promise<Response>}\n *\n *  Where:\n *    @callback ArgsFn\n *    @arg {ArgFn}  arg - Argument function to define a single argument\n *    @arg {Object} t   - Cadence Types object used to define the type\n *    @returns {args[]}\n *\n *    @callback ArgFn\n *    @arg {Any}  value - the value of the argument\n *    @arg {Type} type  - the cadence type of the value\n *    @returns {arg}\n *\n *  Example:\n *    const cadence = `\n *      cadence: `\n *        pub fun main(a: Int, b: Int, c: Address): Int {\n *          log(c)\n *          return a + b\n *        }\n *    `.trim()\n *\n *    const args = (arg, t) => [\n *      arg(5, t.Int),\n *      arg(7, t.Int),\n *      arg(\"0xb2db43ad6bc345fec9\", t.Address),\n *    ]\n *\n *    await query({ cadence, args })\n */\nexport async function query(opts = {}) {\n  await preQuery(opts)\n\n  // prettier-ignore\n  return sdk.send([\n    sdk.script(opts.cadence),\n    sdk.args(normalizeArgs(opts.args || [])),\n    opts.limit && typeof opts.limit === \"number\" && sdk.limit(opts.limit)\n  ]).then(sdk.decode)\n}\n\nasync function preQuery(opts) {\n  invariant(\n    isRequired(opts.cadence),\n    \"query({ cadence }) -- cadence is required\"\n  )\n\n  invariant(\n    isString(opts.cadence),\n    \"query({ cadence }) -- cadence must be a string\"\n  )\n}\n\nfunction normalizeArgs(ax) {\n  if (isFunc(ax)) return ax(sdk.arg, t)\n  return []\n}\n","import {interaction, pipe} from \"@onflow/sdk\"\nimport {resolve as defaultResolve} from \"@onflow/sdk\"\nimport {config} from \"@onflow/config\"\n\nexport const serialize = async (args = [], opts = {}) => {\n  // prettier-ignore\n  const resolveFunction = await config()\n    .get(\"sdk.resolve\", opts.resolve || defaultResolve(opts))\n\n  if (Array.isArray(args)) args = await pipe(interaction(), args)\n  return JSON.stringify(await resolveFunction(args), null, 2)\n}\n","import \"../default-config\"\nimport {config} from \"@onflow/config\"\nimport {\n  spawn,\n  send,\n  subscriber,\n  snapshoter,\n  UPDATED,\n  SNAPSHOT,\n  INIT,\n  SUBSCRIBE,\n  UNSUBSCRIBE,\n} from \"@onflow/util-actor\"\nimport {send as fclSend} from \"@onflow/sdk\"\nimport {decode} from \"@onflow/sdk\"\nimport {getTransactionStatus} from \"@onflow/sdk\"\n\nconst RATE = 2500\nconst POLL = \"POLL\"\n\nconst fetchTxStatus = async (transactionId) => {\n  return fclSend([getTransactionStatus(transactionId)]).then(decode)\n}\n\nconst isExpired = (tx) => tx.status === 5\nconst isSealed = (tx) => tx.status >= 4\nconst isExecuted = (tx) => tx.status >= 3\nconst isFinalized = (tx) => tx.status >= 2\nconst isPending = (tx) => tx.status >= 1\nconst isUnknown = (tx) => tx.status >= 0\n\nconst isDiff = (cur, next) => {\n  return JSON.stringify(cur) !== JSON.stringify(next)\n}\n\nconst HANDLERS = {\n  [INIT]: async (ctx) => {\n    const tx = await fetchTxStatus(ctx.self())\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    ctx.merge(tx)\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, ctx.all())\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply(ctx.all())\n  },\n  [POLL]: async (ctx) => {\n    const tx = await fetchTxStatus(ctx.self())\n    if (!isSealed(tx)) setTimeout(() => ctx.sendSelf(POLL), RATE)\n    if (isDiff(ctx.all(), tx)) ctx.broadcast(UPDATED, tx)\n    ctx.merge(tx)\n  },\n}\n\nconst scoped = (transactionId) => {\n  if (typeof transactionId === \"object\")\n    transactionId = transactionId.transactionId\n  if (transactionId == null) throw new Error(\"transactionId required\")\n  return transactionId\n}\n\nconst spawnTransaction = (transactionId) => {\n  return spawn(HANDLERS, scoped(transactionId))\n}\n\nexport function transaction(transactionId) {\n  function snapshot() {\n    return snapshoter(transactionId, spawnTransaction)\n  }\n\n  function subscribe(callback) {\n    return subscriber(scoped(transactionId), spawnTransaction, callback)\n  }\n\n  function once(predicate) {\n    return function innerOnce(opts = {}) {\n      const suppress = opts.suppress || false\n      return new Promise((resolve, reject) => {\n        const unsub = subscribe((txStatus) => {\n          if (txStatus.statusCode && !suppress) {\n            reject(txStatus.errorMessage)\n            unsub()\n          } else if (predicate(txStatus)) {\n            resolve(txStatus)\n            unsub()\n          }\n        })\n      })\n    }\n  }\n\n  return {\n    snapshot,\n    subscribe,\n    onceFinalized: once(isFinalized),\n    onceExecuted: once(isExecuted),\n    onceSealed: once(isSealed),\n  }\n}\n\ntransaction.isUnknown = isUnknown\ntransaction.isPending = isPending\ntransaction.isFinalized = isFinalized\ntransaction.isExecuted = isExecuted\ntransaction.isSealed = isSealed\ntransaction.isExpired = isExpired\n","import {spawn, subscriber, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {config} from \"@onflow/config\"\nimport {latestBlock} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nimport {send} from \"@onflow/sdk\"\nimport {decode} from \"@onflow/sdk\"\n\nconst RATE = 10000\nconst UPDATED = \"UPDATED\"\nconst TICK = \"TICK\"\n\nconst scheduleTick = async ctx => {\n  return setTimeout(\n    () => ctx.sendSelf(TICK),\n    await config().get(\"fcl.eventPollRate\", RATE)\n  )\n}\n\nconst HANDLERS = {\n  [TICK]: async ctx => {\n    if (!ctx.hasSubs()) return\n    let hwm = ctx.get(\"hwm\")\n    if (hwm == null) {\n      ctx.put(\"hwm\", await latestBlock())\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    } else {\n      let next = await latestBlock()\n      ctx.put(\"hwm\", next)\n      const data = await send([\n        getEvents(ctx.self(), hwm.height, next.height - 1),\n      ]).then(decode)\n      for (let d of data) ctx.broadcast(UPDATED, d.data)\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    }\n  },\n  [SUBSCRIBE]: async (ctx, letter) => {\n    if (!ctx.hasSubs()) {\n      ctx.put(\"tick\", await scheduleTick(ctx))\n    }\n    ctx.subscribe(letter.from)\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n    if (!ctx.hasSubs()) {\n      clearTimeout(ctx.get(\"tick\"))\n      ctx.delete(\"tick\")\n      ctx.delete(\"hwm\")\n    }\n  },\n}\n\nconst spawnEvents = key => spawn(HANDLERS, key)\n\nexport function events(key) {\n  return {\n    subscribe: callback => subscriber(key, spawnEvents, callback),\n  }\n}\n","export const SERVICE_PRAGMA = {\n  f_type: \"Service\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const IDENTITY_PRAGMA = {\n  f_type: \"Identity\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const PROVIDER_PRAGME = {\n  f_type: \"Provider\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const USER_PRAGMA = {\n  f_type: \"USER\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const POLLING_RESPONSE_PRAGMA = {\n  f_type: \"PollingResponse\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const COMPOSITE_SIGNATURE_PRAGMA = {\n  f_type: \"CompositeSignature\",\n  f_vsn: \"1.0.0\",\n}\n\nexport const OPEN_ID_PRAGME = {\n  f_type: \"OpenId\",\n  f_vsn: \"1.0.0\",\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"frame\",\n//    \"endpoint\": \"https://rawr\",\n//    \"data\": {},   // Sent to frame when ready\n//    \"params\": {}, // include in query params on frame\n// }\nexport function normalizeFrame(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        old: service,\n        ...SERVICE_PRAGMA,\n        type: \"frame\",\n        endpoint: service.endpoint,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//    \"f_type\": \"Service\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"type\": \"back-channel-rpc\",\n//    \"endpoint\": \"https://rawr\",\n//    \"method\": \"HTTP/GET\", // HTTP/GET | HTTP/POST\n//    \"data\": {},           // included in body of rpc\n//    \"params\": {},         // included as query params on endpoint url\n// }\nexport function normalizeBackChannelRpc(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: \"back-channel-rpc\",\n        endpoint: service.endpoint,\n        method: service.method,\n        params: service.params || {},\n        data: service.data || {},\n      }\n  }\n}\n","import {normalizeAuthn} from \"./authn\"\nimport {normalizeAuthz} from \"./authz\"\nimport {normalizePreAuthz} from \"./pre-authz\"\nimport {normalizeFrame} from \"./frame\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeOpenId} from \"./open-id\"\n\nexport function normalizeServices(services, data) {\n  return services.map(service => normalizeService(service, data))\n}\n\nconst serviceNormalizers = {\n  \"back-channel-rpc\": normalizeBackChannelRpc,\n  \"pre-authz\": normalizePreAuthz,\n  authz: normalizeAuthz,\n  authn: normalizeAuthn,\n  frame: normalizeFrame,\n  \"open-id\": normalizeOpenId,\n}\n\nexport function normalizeService(service, data) {\n  try {\n    var normalized = serviceNormalizers[service.type](service, data)\n    // console.log(service.type, {normalized, service})\n    return normalized\n  } catch (error) {\n    console.error(\n      `Unrecognized FCL Service Type [${service.type}]`,\n      service,\n      error\n    )\n    return service\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"pre-authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of pre-authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizePreAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA, IDENTITY_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authz\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"method\": \"HTTP/POST\", // HTTP/POST | IFRAME/RPC | HTTP/RPC\n//   \"identity\": {\n//      \"address\": \"0x______\",\n//      \"keyId\": 0,\n//   },\n//   \"data\": {}, // included in body of authz request\n//   \"params\": {}, // included as query params on endpoint url\n// }\nexport function normalizeAuthz(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.endpoint,\n        method: service.method,\n        identity: {\n          ...IDENTITY_PRAGMA,\n          address: withPrefix(service.addr),\n          keyId: service.keyId,\n        },\n        params: service.params,\n        data: service.data,\n      }\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport {SERVICE_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"authn\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"endpoint\": \"https://rawr\",\n//   \"id\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\", // wallets internal id for the user\n//   \"identity\": {\n//     \"address\": \"0x____\"\n//   },\n//   \"provider\": {\n//     \"address\": \"0x____\",\n//     \"name\": \"Best Wallet\",\n//     \"description\": \"The Best Wallet\"\n//     \"icon\": \"https://\",\n//   }\n// }\nexport function normalizeAuthn(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return {\n        ...SERVICE_PRAGMA,\n        type: service.type,\n        uid: service.id,\n        endpoint: service.authn,\n        id: service.pid,\n        provider: {\n          address: withPrefix(service.addr),\n          name: service.name,\n          icon: service.icon,\n        },\n      }\n  }\n}\n","import {SERVICE_PRAGMA, OPEN_ID_PRAGMA} from \"./__vsn\"\n\n// {\n//   \"f_type\": \"Service\",\n//   \"f_vsn\": \"1.0.0\",\n//   \"type\": \"open-id\",\n//   \"uid\": \"uniqueDedupeKey\",\n//   \"method: \"data\",\n//   \"data\": {\n//      \"profile\": {\n//        \"name\": \"Bob\",\n//        \"family_name\": \"Builder\",\n//        \"given_name\": \"Robert\",\n//        \"middle_name\": \"the\",\n//        \"nickname\": \"Bob the Builder\",\n//        \"perferred_username\": \"bob\",\n//        \"profile\": \"https://www.bobthebuilder.com/\",\n//        \"picture\": \"https://avatars.onflow.org/avatar/bob\",\n//        \"gender\": \"...\",\n//        \"birthday\": \"2001-01-18\",\n//        \"zoneinfo\": \"America/Vancouver\",\n//        \"locale\": \"en-us\",\n//        \"updated_at\": \"1614970797388\"\n//      },\n//      \"email\": {\n//        \"email\": \"bob@bob.bob\",\n//        \"email_verified\": true\n//      },\n//      \"address\": {\n//        \"address\": \"One Apple Park Way, Cupertino, CA 95014, USA\"\n//      },\n//      \"phone\": {\n//        \"phone_number\": \"+1 (xxx) yyy-zzzz\",\n//        \"phone_number_verified\": true\n//      },\n//      \"social\": {\n//        \"twitter\": \"@_qvvg\",\n//        \"twitter_verified\": true\n//      },\n//   }\n// }\nexport function normalizeOpenId(service) {\n  if (service == null) return null\n\n  switch (service[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return service\n\n    default:\n      return null\n  }\n}\n","import {withPrefix} from \"@onflow/util-address\"\nimport * as rlp from \"@onflow/rlp\"\nimport {fetchServices} from \"./fetch-services\"\nimport {mergeServices} from \"./merge-services\"\nimport {USER_PRAGMA} from \"./normalize/__vsn\"\nimport {normalizeService} from \"./normalize/service\"\n\nfunction deriveCompositeId(authn) {\n  return rlp\n    .encode([\n      authn.provider.address || authn.provider.name || \"UNSPECIFIED\",\n      authn.id,\n    ])\n    .toString(\"hex\")\n}\n\nfunction normalizeData(data) {\n  data.addr = data.addr ? withPrefix(data.addr) : null\n  data.paddr = data.paddr ? withPrefix(data.paddr) : null\n  return data\n}\n\nfunction findService(type, services) {\n  return services.find(d => d.type === type)\n}\n\nexport async function buildUser(data) {\n  data = normalizeData(data)\n\n  var services = mergeServices(\n    data.services || [],\n    await fetchServices(data.hks, data.code)\n  ).map(service => normalizeService(service, data))\n\n  const authn = findService(\"authn\", services)\n\n  return {\n    ...USER_PRAGMA,\n    addr: withPrefix(data.addr),\n    cid: deriveCompositeId(authn),\n    loggedIn: true,\n    services: services,\n    expiresAt: data.exp,\n  }\n}\n","export function serviceOfType(services = [], type) {\n  return services.find(service => service.type === type)\n}\n","export function serviceEndpoint(service) {\n  const url = new URL(service.endpoint)\n  url.searchParams.append(\"l6n\", window.location.origin)\n  if (service.params != null) {\n    for (let [key, value] of Object.entries(service.params || {})) {\n      url.searchParams.append(key, value)\n    }\n  }\n  return url\n}\n","import {serviceEndpoint} from \"./service-endpoint\"\n\nexport function fetchService(service, opts = {}) {\n  const method = opts.method || \"POST\"\n  const body =\n    method === \"GET\"\n      ? undefined\n      : JSON.stringify(opts.data || service.data || {})\n\n  return fetch(serviceEndpoint(service), {\n    method: method,\n    headers: {\n      ...(service.headers || {}),\n      ...(opts.headers || {}),\n      \"Content-Type\": \"application/json\",\n    },\n    body: body,\n  }).then((d) => d.json())\n}\n","import {POLLING_RESPONSE_PRAGMA} from \"./__vsn\"\nimport {normalizeBackChannelRpc} from \"./back-channel-rpc\"\nimport {normalizeFrame} from \"./frame\"\n\n// {\n//    \"f_type\": \"PollingResponse\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"status\": \"PENDING\", // PENDING | APPROVED | DECLINED\n//    \"reason\": null,      // Reason for Declining Transaction\n//    \"data\": null,        // Return value for APPROVED\n//    \"updates\": BackChannelRpc,\n//    \"local\": Frame,\n// }\nexport function normalizePollingResponse(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...POLLING_RESPONSE_PRAGMA,\n        status: resp.status,\n        reason: resp.reason,\n        data: resp.compositeSignature || resp.data || {},\n        updates: normalizeBackChannelRpc(resp.authorizationUpdates),\n        local: normalizeFrame((resp.local || [])[0]),\n      }\n  }\n}\n","import {COMPOSITE_SIGNATURE_PRAGMA} from \"./__vsn\"\nimport {sansPrefix} from \"@onflow/util-address\"\n\n// {\n//    \"f_type\": \"CompositeSignature\",\n//    \"f_vsn\": \"1.0.0\",\n//    \"addr\": \"_____\",         // sans-prefix\n//    \"signature\": \"adfe1234\", // hex\n//    \"keyId\": 3,\n// }\nexport function normalizeCompositeSignature(resp) {\n  if (resp == null) return null\n\n  switch (resp[\"f_vsn\"]) {\n    case \"1.0.0\":\n      return resp\n\n    default:\n      return {\n        ...COMPOSITE_SIGNATURE_PRAGMA,\n        addr: sansPrefix(resp.addr || resp.address),\n        signature: resp.signature || resp.sig,\n        keyId: resp.keyId,\n      }\n  }\n}\n","import {invariant} from \"@onflow/util-invariant\"\n\nconst FRAME = \"FCL_IFRAME\"\n\nconst FRAME_STYLES = `\n  position:fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  height: 100vh;\n  width: 100vw;\n  display:block;\n  background:rgba(0,0,0,0.25);\n  z-index: 2147483647;\n  box-sizing: border-box;\n`\n\nexport function renderFrame(src) {\n  invariant(\n    !document.getElementById(FRAME),\n    \"Attempt at triggering multiple Frames\",\n    {src}\n  )\n\n  const $frame = document.createElement(\"iframe\")\n  $frame.src = src\n  $frame.id = FRAME\n  $frame.allow = \"usb *\"\n  $frame.frameBorder = \"0\"\n  $frame.style.cssText = FRAME_STYLES\n  document.body.append($frame)\n\n  const unmount = () => {\n    if (document.getElementById(FRAME)) {\n      document.getElementById(FRAME).remove()\n    }\n  }\n\n  return [$frame, unmount]\n}\n","import {renderFrame} from \"./render-frame\"\nimport {serviceEndpoint} from \"./service-endpoint\"\n\nconst CLOSE_EVENT = \"FCL:FRAME:CLOSE\"\nconst READY_EVENT = \"FCL:FRAME:READY\"\nconst RESPONSE_EVENT = \"FCL:FRAME:RESPONSE\"\nconst OPEN_EVENT = \"FCL:FRAME:OPEN\"\n\nconst noop = () => {}\n\nconst IGNORE = new Set([\n  \"monetizationstart\",\n  \"monetizationpending\",\n  \"monetizationprogress\",\n  \"monetizationstop\",\n])\n\nexport function frame(service, opts = {}) {\n  if (service == null) return {send: noop, close: noop}\n\n  var tab = null\n  const onClose = opts.onClose || noop\n  const onMessage = opts.onMessage || noop\n  const onReady = opts.onReady || noop\n  const onResponse = opts.onResponse || noop\n\n  window.addEventListener(\"message\", internal)\n  const [$frame, unmount] = renderFrame(serviceEndpoint(service))\n  return {send, close}\n\n  function internal(e) {\n    try {\n      if (typeof e.data !== \"object\") return\n      // if (e.data.type == null) return\n      if (IGNORE.has(e.data.type)) return\n      if (e.data.type === CLOSE_EVENT) close()\n      if (e.data.type === READY_EVENT) onReady(e, {send, close})\n      if (e.data.type === RESPONSE_EVENT) onResponse(e, {send, close})\n      onMessage(e, {send, close})\n\n      // Backwards Compatible\n      if (e.data.type === \"FCL::CHALLENGE::RESPONSE\") {\n        onResponse(e, {send, close})\n      }\n      if (e.data.type === \"FCL::AUTHZ_READY\") onReady(e, {send, close})\n      if (e.data.type === \"FCL::CHALLENGE::CANCEL\") close()\n      if (e.data.type === \"FCL::CANCEL\") close()\n    } catch (error) {\n      console.error(\"Frame Callback Error\", error)\n      close()\n    }\n  }\n\n  function close() {\n    try {\n      window.removeEventListener(\"message\", internal)\n      if (tab != null) tab.close()\n      unmount()\n      onClose()\n    } catch (error) {\n      console.error(\"Frame Close Error\", error)\n    }\n  }\n\n  function send(msg) {\n    try {\n      // console.log(\"SEND\", msg)\n      $frame.contentWindow.postMessage(\n        JSON.parse(JSON.stringify(msg || {})),\n        \"*\"\n      )\n    } catch (error) {\n      console.error(\"Frame Send Error\", msg, error)\n    }\n  }\n\n  function open(msg) {\n    try {\n      tab = window.open(msg.endpoint)\n      tab.focus()\n    } catch (error) {\n      console.error(\"Frame Open Error\", msg, error)\n    }\n  }\n}\n","import {normalizePollingResponse} from \"../../../normalize/polling-response\"\nimport {serviceEndpoint} from \"./service-endpoint\"\nimport {invariant} from \"@onflow/util-invariant\"\nimport {fetchService} from \"./fetch-service\"\n\nconst OPTIONS = {\n  \"HTTP/GET\": \"GET\",\n  \"HTTP/POST\": \"POST\",\n}\n\nconst serviceMethod = service => {\n  invariant(\n    OPTIONS[service.method],\n    \"Invalid Service Method for type back-channel-rpc\",\n    {service}\n  )\n  return OPTIONS[service.method]\n}\n\nconst serviceBody = service => {\n  if (service.method === \"HTTP/GET\") return undefined\n  if (service.method === \"HTTP/POST\" && service.data != null)\n    return JSON.stringify(service.data)\n  return undefined\n}\n\nexport async function poll(service, canContinue = () => true) {\n  invariant(service, \"Missing Polling Service\", {service})\n  if (!canContinue()) throw new Error(\"Externally Halted\")\n\n  const resp = await fetchService(service, {\n    method: serviceMethod(service),\n  }).then(normalizePollingResponse)\n\n  switch (resp.status) {\n    case \"APPROVED\":\n      return resp.data\n    case \"DECLINED\":\n      throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n    default:\n      await new Promise(r => setTimeout(r, 500))\n      return poll(resp.updates, canContinue)\n  }\n}\n","import {fetchService} from \"./utils/fetch-service\"\nimport {serviceEndpoint} from \"./utils/service-endpoint\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {normalizeCompositeSignature} from \"../../normalize/composite-signature\"\nimport {frame} from \"./utils/frame\"\nimport {poll} from \"./utils/poll\"\n\nexport async function execHttpPost(service, signable) {\n  signable.data = service.data\n  const resp = await fetchService(service, {\n    data: signable,\n  }).then(normalizePollingResponse)\n\n  if (resp.status === \"APPROVED\") {\n    return resp.data\n  } else if (resp.status === \"DECLINED\") {\n    throw new Error(`Declined: ${resp.reason || \"No reason supplied.\"}`)\n  } else if (resp.status === \"PENDING\") {\n    var canContinue = true\n    const {close: closeFrame} = frame(resp.local, {\n      onClose() {\n        canContinue = false\n      },\n    })\n\n    return poll(resp.updates, () => canContinue)\n      .then(compositeSignature => {\n        closeFrame()\n        return normalizeCompositeSignature(compositeSignature)\n      })\n      .catch(error => {\n        console.error(error)\n        closeFrame()\n        throw error\n      })\n  } else {\n    console.error(`Auto Decline: Invalid Response`, {service, resp})\n    throw new Error(`Auto Decline: Invalid Response`)\n  }\n}\n","import {execHttpPost} from \"./strategies/http-post\"\nimport {execIframeRPC} from \"./strategies/iframe-rpc\"\n\nconst STRATEGIES = {\n  \"HTTP/RPC\": execHttpPost,\n  \"HTTP/POST\": execHttpPost,\n  \"IFRAME/RPC\": execIframeRPC,\n}\n\nexport async function execService(service, msg) {\n  try {\n    return STRATEGIES[service.method](service, msg)\n  } catch (error) {\n    console.error(\"execService(service, msg)\", error, {service, msg})\n    throw error\n  }\n}\n","import {uid} from \"@onflow/util-uid\"\nimport {frame} from \"./utils/frame\"\nimport {normalizePollingResponse} from \"../../normalize/polling-response\"\nimport {normalizeCompositeSignature} from \"../../normalize/composite-signature\"\n\nexport function execIframeRPC(service, signable) {\n  return new Promise((resolve, reject) => {\n    const id = uid()\n    signable.data = service.data\n\n    frame(service, {\n      onReady(_, {send}) {\n        try {\n          // This is out of place, we need to find an alternative\n          send({\n            jsonrpc: \"2.0\",\n            id: id,\n            method: \"fcl:sign\",\n            params: [signable, service.params],\n          })\n        } catch (error) {\n          throw error\n        }\n      },\n\n      onClose() {\n        reject(`Declined: Externally Halted`)\n      },\n\n      onMessage(e, {close}) {\n        try {\n          if (typeof e.data !== \"object\") return\n          if (e.data.jsonrpc !== \"2.0\") return\n          if (e.data.id !== id) return\n          const resp = normalizePollingResponse(e.data.result)\n\n          switch (resp.status) {\n            case \"APPROVED\":\n              resolve(normalizeCompositeSignature(resp.data))\n              close()\n              break\n\n            case \"DECLINED\":\n              reject(`Declined: ${resp.reason || \"No reason supplied\"}`)\n              close()\n              break\n\n            default:\n              reject(`Declined: No reason supplied`)\n              close()\n              break\n          }\n        } catch (error) {\n          console.error(\"execIframeRPC onMessage error\", error)\n          throw error\n        }\n      },\n    })\n  })\n}\n","import \"../default-config\"\nimport {account} from \"@onflow/sdk\"\nimport {config} from \"@onflow/config\"\nimport {spawn, send, INIT, SUBSCRIBE, UNSUBSCRIBE} from \"@onflow/util-actor\"\nimport {sansPrefix} from \"@onflow/util-address\"\nimport {buildUser} from \"./build-user\"\nimport {serviceOfType} from \"./service-of-type\"\nimport {execService} from \"./exec-service\"\nimport {frame} from \"./exec-service/strategies/utils/frame\"\n\nconst NAME = \"CURRENT_USER\"\nconst UPDATED = \"CURRENT_USER/UPDATED\"\nconst SNAPSHOT = \"SNAPSHOT\"\nconst SET_CURRENT_USER = \"SET_CURRENT_USER\"\nconst DEL_CURRENT_USER = \"DEL_CURRENT_USER\"\n\nconst DATA = `{\n  \"f_type\": \"User\",\n  \"f_vsn\": \"1.0.0\",\n  \"addr\":null,\n  \"cid\":null,\n  \"loggedIn\":null,\n  \"expiresAt\":null,\n  \"services\":[]\n}`\n\nconst coldStorage = {\n  get: async () => {\n    const fallback = JSON.parse(DATA)\n    const stored = JSON.parse(sessionStorage.getItem(NAME))\n    if (stored != null && fallback[\"f_vsn\"] !== stored[\"f_vsn\"]) {\n      sessionStorage.removeItem(NAME)\n      return fallback\n    }\n    return stored || fallback\n  },\n  put: async data => {\n    sessionStorage.setItem(NAME, JSON.stringify(data))\n    return data\n  },\n}\n\nconst canColdStorage = () => {\n  return config().get(\"persistSession\", true)\n}\n\nconst HANDLERS = {\n  [INIT]: async ctx => {\n    ctx.merge(JSON.parse(DATA))\n    if (await canColdStorage()) {\n      const user = await coldStorage.get()\n      if (notExpired(user)) ctx.merge(user)\n    }\n  },\n  [SUBSCRIBE]: (ctx, letter) => {\n    ctx.subscribe(letter.from)\n    ctx.send(letter.from, UPDATED, {...ctx.all()})\n  },\n  [UNSUBSCRIBE]: (ctx, letter) => {\n    ctx.unsubscribe(letter.from)\n  },\n  [SNAPSHOT]: async (ctx, letter) => {\n    letter.reply({...ctx.all()})\n  },\n  [SET_CURRENT_USER]: async (ctx, letter, data) => {\n    ctx.merge(data)\n    if (await canColdStorage()) coldStorage.put(ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n  [DEL_CURRENT_USER]: async (ctx, letter) => {\n    ctx.merge(JSON.parse(DATA))\n    if (await canColdStorage()) coldStorage.put(ctx.all())\n    ctx.broadcast(UPDATED, {...ctx.all()})\n  },\n}\n\nconst identity = v => v\nconst spawnCurrentUser = () => spawn(HANDLERS, NAME)\n\nfunction notExpired(user) {\n  return (\n    user.expiresAt == null ||\n    user.expiresAt === 0 ||\n    user.expiresAt > Date.now()\n  )\n}\n\nasync function configLens(regex) {\n  return Object.fromEntries(\n    Object.entries(await config().where(regex)).map(([key, value]) => [\n      key.replace(regex, \"\"),\n      value,\n    ])\n  )\n}\n\nasync function authenticate() {\n  return new Promise(async (resolve, reject) => {\n    spawnCurrentUser()\n    const user = await snapshot()\n    if (user.loggedIn && notExpired(user)) return resolve(user)\n\n    frame(\n      {\n        endpoint:\n          (await config().get(\"discovery.wallet\")) ||\n          (await config().get(\"challenge.handshake\")),\n      },\n      {\n        async onReady(e, {send, close}) {\n          send({\n            type: \"FCL:AUTHN:CONFIG\",\n            services: await configLens(/^service\\./),\n            app: await configLens(/^app\\.detail\\./),\n          })\n        },\n        async onClose() {\n          resolve(await snapshot())\n        },\n        async onResponse(e, {close}) {\n          send(NAME, SET_CURRENT_USER, await buildUser(e.data))\n          resolve(await snapshot())\n          close()\n        },\n      }\n    )\n  })\n}\n\nfunction unauthenticate() {\n  spawnCurrentUser()\n  send(NAME, DEL_CURRENT_USER)\n}\n\nconst normalizePreAuthzResponse = authz => ({\n  f_type: \"PreAuthzResponse\",\n  f_vsn: \"1.0.0\",\n  proposer: (authz || {}).proposer,\n  payer: (authz || {}).payer || [],\n  authorization: (authz || {}).authorization || [],\n})\n\nfunction resolvePreAuthz(authz) {\n  const resp = normalizePreAuthzResponse(authz)\n  const axs = []\n\n  if (resp.proposer != null) axs.push([\"PROPOSER\", resp.proposer])\n  for (let az of resp.payer || []) axs.push([\"PAYER\", az])\n  for (let az of resp.authorization || []) axs.push([\"AUTHORIZER\", az])\n\n  var result = axs.map(([role, az]) => ({\n    tempId: [az.identity.address, az.identity.keyId].join(\"|\"),\n    addr: az.identity.address,\n    keyId: az.identity.keyId,\n    signingFunction(signable) {\n      return execService(az, signable)\n    },\n    role: {\n      proposer: role === \"PROPOSER\",\n      payer: role === \"PAYER\",\n      authorizer: role === \"AUTHORIZER\",\n    },\n  }))\n  return result\n}\n\nasync function authorization(account) {\n  spawnCurrentUser()\n  const user = await authenticate()\n  const authz = serviceOfType(user.services, \"authz\")\n\n  const preAuthz = serviceOfType(user.services, \"pre-authz\")\n  if (preAuthz) {\n    return {\n      ...account,\n      tempId: \"CURRENT_USER\",\n      async resolve(account, preSignable) {\n        return resolvePreAuthz(await execService(preAuthz, preSignable))\n      },\n    }\n  }\n\n  return {\n    ...account,\n    tempId: \"CURRENT_USER\",\n    resolve: null,\n    addr: sansPrefix(authz.identity.address),\n    keyId: authz.identity.keyId,\n    sequenceNum: null,\n    signature: null,\n    async signingFunction(signable) {\n      return execService(authz, signable)\n    },\n  }\n}\n\nfunction subscribe(callback) {\n  spawnCurrentUser()\n  const EXIT = \"@EXIT\"\n  const self = spawn(async ctx => {\n    ctx.send(NAME, SUBSCRIBE)\n    while (1) {\n      const letter = await ctx.receive()\n      if (letter.tag === EXIT) {\n        ctx.send(NAME, UNSUBSCRIBE)\n        return\n      }\n      callback(letter.data)\n    }\n  })\n  return () => send(self, EXIT)\n}\n\nfunction snapshot() {\n  spawnCurrentUser()\n  return send(NAME, SNAPSHOT, null, {expectReply: true, timeout: 0})\n}\n\nasync function info() {\n  spawnCurrentUser()\n  const {addr} = await snapshot()\n  if (addr == null) throw new Error(\"No Flow Address for Current User\")\n  return account(addr)\n}\n\nexport const currentUser = () => {\n  return {\n    authenticate,\n    unauthenticate,\n    authorization,\n    subscribe,\n    snapshot,\n  }\n}\n","export async function fetchServices(servicesURL, code) {\n  if (servicesURL == null || code == null) return []\n\n  const url = new URL(servicesURL)\n  url.searchParams.append(\"code\", code)\n\n  const resp = await fetch(url, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  }).then(d => d.json())\n\n  if (Array.isArray(resp)) return resp\n\n  // Backwards compatibility for First-Gen Wallet Providers\n  const services = []\n\n  // Convert authorizations into authz services\n  if (Array.isArray(resp.authorizations)) {\n    for (let service of resp.authorizations) {\n      services.push({\n        type: \"authz\",\n        keyId: resp.keyId,\n        ...service,\n      })\n    }\n  }\n\n  // Convert Provider info into an authn service\n  if (resp.provider != null) {\n    services.push({\n      type: \"authn\",\n      id: \"wallet-provider#authn\",\n      ...resp.provider,\n    })\n  }\n\n  return services\n}\n","import {withPrefix} from \"@onflow/util-address\"\n\nexport function mergeServices(sx1 = [], sx2 = []) {\n  // TODO: Make this smarter\n  return [...sx1, ...sx2]\n}\n","import \"./default-config\"\nimport \"./temp\"\nexport {VERSION} from \"./VERSION\"\nexport {query} from \"./exec/query\"\nexport {serialize} from \"./serialize\"\nexport {transaction as tx} from \"./transaction\"\nexport {events} from \"./events\"\n\nimport {currentUser} from \"./current-user\"\nexport {currentUser}\n\nexport const authenticate = () => currentUser().authenticate()\nexport const unauthenticate = () => currentUser().unauthenticate()\nexport const reauthenticate = () => {\n  currentUser().unauthenticate()\n  return currentUser().authenticate()\n}\nexport const signUp = () => currentUser().authenticate()\nexport const logIn = () => currentUser().authenticate()\n\nexport const authz = currentUser().authorization\n\nimport * as types from \"@onflow/types\"\nexport const t = types\n\nexport {config} from \"@onflow/config\"\nexport {send} from \"@onflow/sdk\"\nexport {decode} from \"@onflow/sdk\"\nexport {account} from \"@onflow/sdk\"\nexport {latestBlock} from \"@onflow/sdk\"\nexport {isOk, isBad, why, pipe, build} from \"@onflow/sdk\"\nexport {withPrefix, sansPrefix, display} from \"@onflow/util-address\"\nexport {template as cadence} from \"@onflow/util-template\"\nexport {template as cdc} from \"@onflow/util-template\"\n\n// builders\nexport {transaction} from \"@onflow/sdk\"\nexport {script} from \"@onflow/sdk\"\nexport {ping} from \"@onflow/sdk\"\nexport {atBlockHeight} from \"@onflow/sdk\"\nexport {atBlockId} from \"@onflow/sdk\"\nexport {getAccount} from \"@onflow/sdk\"\nexport {getEvents} from \"@onflow/sdk\"\nexport {getEventsAtBlockHeightRange} from \"@onflow/sdk\"\nexport {getEventsAtBlockIds} from \"@onflow/sdk\"\nexport {getLatestBlock} from \"@onflow/sdk\"\nexport {getBlock} from \"@onflow/sdk\"\nexport {getBlockHeader} from \"@onflow/sdk\"\nexport {getBlockById} from \"@onflow/sdk\"\nexport {getBlockByHeight} from \"@onflow/sdk\"\nexport {getCollection} from \"@onflow/sdk\"\nexport {getTransactionStatus} from \"@onflow/sdk\"\nexport {getTransaction} from \"@onflow/sdk\"\nexport {authorizations, authorization} from \"@onflow/sdk\"\nexport {args, arg} from \"@onflow/sdk\"\nexport {proposer} from \"@onflow/sdk\"\nexport {payer} from \"@onflow/sdk\"\nexport {limit} from \"@onflow/sdk\"\nexport {ref} from \"@onflow/sdk\"\nexport {params, param} from \"@onflow/sdk\"\nexport {validator} from \"@onflow/sdk\"\nexport {invariant} from \"@onflow/sdk\"\n"]},"metadata":{},"sourceType":"module"}